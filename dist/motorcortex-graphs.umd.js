!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i(require("@donkeyclip/motorcortex")):"function"==typeof define&&define.amd?define(["@donkeyclip/motorcortex"],i):(t="undefined"!=typeof globalThis?globalThis:t||self)["@donkeyclip/motorcortex-graphs"]=i(t.MotorCortex)}(this,(function(t){"use strict";const i={gray:"#75706E",lightGray:"#B2B1AE",darkGray:"#434243",whiteBack:"#EEEEEE",font:"#100300",accent:"#FFD800",background:"transparent",dataColors:["rgb(117,112,110)","rgb(255,216,0)","rgb(87,86,87)","rgb(163, 255, 200)","rgb(255,255,255)","rgb(206, 36, 132)","rgb(68, 214, 37)","rgb(228, 31, 31)","rgb(68, 36, 157)","rgb(45, 109, 121)"]};function e(i,e){i.addIncident(new t.CSSEffect({animatedAttrs:{opacity:1},initialValues:{opacity:0}},{selector:e,duration:1}),0),i.addIncident(new t.CSSEffect({animatedAttrs:{opacity:0}},{selector:e,duration:1}),i.introDur+i.staticDur+i.outroDur-1)}function n(i,e){i.addIncident(new t.CSSEffect({animatedAttrs:{opacity:1},initialValues:{opacity:0}},{selector:e,duration:1}),0),i.attrs.timings.outro||i.addIncident(new t.CSSEffect({animatedAttrs:{opacity:0}},{selector:e,duration:1}),i.attrs.timings.intro+i.attrs.timings.static-1)}const a=/^[+-]?(\d+([.]\d*)?|[.]\d+)/gi;var s=t=>{const i=t.match(a)[0],e=t.substring(i.length);if("number"==typeof(n=Number(i))&&isFinite(n)&&("%"!==e||"px"!==e))return{number:Number(i),unit:e};var n};function o(t){return Object.entries(t).map((t=>{let[i,e]=t;return`${i}{${Object.entries(e).map((t=>{let[i,e]=t;return`${i}:${e}`})).join(";")}}`})).join("")}class r extends t.HTMLClip{get html(){this.buildVars();const t=[];for(const i in this.title){const e=" "===this.title[i]?'<div class="space-char letter-wrapper">-</div>':`<div class="fontColorOn letter-wrapper">${this.title[i]}</div>`;t.push(`<div id="letter-${i}" class="letter-container">${e}</div>`)}const i=[];for(const t in this.subtitle){const e=" "===this.subtitle[t]?'<div class="space-char letter-wrapper">-</div>':`<div className="fontColorOn letter-wrapper">${this.subtitle[t]}</div>`;i.push(`<div id="letter-${t}" class="letter-container">${e}</div>`)}const e=[];for(let t=0;t<this.gridLinesNum;t++)e.push(`<div class="gridLine" id="gridLine${t}"></div>`);const n=[],a=[];for(const t in this.data){const i=this.data[t];i.name.length>4&&(i.name=i.name.slice(0,4),this.data[t]=i),n.push(`<div class="label-container" id="label-${t}">${this.data[t].name}</div>`),this.maxPoint<i.value&&(this.maxPoint=i.value),a.push(`<div class="${i.name}-bar-${t}">\n          <div\n            class="bar-fill"\n            style="background:${i.color?i.color:this.primaryC}"\n            id="${i.name}-bar-fill"\n          ></div>\n        </div>`)}return this.maxPoint=this.attrs.data.maxValue?this.attrs.data.maxValue:this.maxPoint,`<div class="container-barChart">\n        <div class="title-container">\n          <div class="title-wrapper">${t.join("")}</div>\n          <div class="subtitle-position-end">\n            <div class="subtitle-wrapper">${i.join("")}</div>\n          </div>\n          <div class="title-back-wrapper">\n            <div class="title-back-animHelper">\n              <div class="title-background block-background"></div>\n            </div>\n          </div>\n        </div>\n        <div class="graph-container">\n          <div class="graph">${a.join("")}</div>\n          <div class="gridlines">${e.join("")}</div>\n        </div>\n        <div class="y-axis"></div>\n        <div class="x-axis"></div>\n        <div class="x-labels-container">${n.join("")}</div>\n        <div class="x-labels-back-wrapper">\n          <div class="x-labels-background block-background"></div>\n        </div>\n      </div>`}get css(){return function(t){const i={".y-axis":{width:"4px",height:"70%",left:"14%",top:"15%",background:t.tertiaryC,position:"absolute"},".x-axis":{width:"74%",height:"4px",top:"85%",left:"14%",background:t.tertiaryC,position:"absolute"},".gridlines":{width:"100%",height:"calc(100% + 3px)",display:"flex","flex-direction":"column","justify-content":"space-between"},".gridLine":{height:"3px",width:"100%",background:t.secondaryC,"align-self":"flex-end"},".graph":{top:0,left:0,position:"absolute",width:"100%",height:"100%",display:"flex","justify-content":"space-around",overflow:"hidden"},".bar-container":{"align-self":"flex-end",width:100/t.data.length+"%",margin:`0% ${10/t.data.length+1}%`,height:"100%",display:"flex"},".bar-fill":{width:"100%",height:"100%",background:t.primaryC,"align-self":"center"},".block-background":{width:"100%",height:"100%",background:t.accentC,position:"relative"},".title-back-animHelper":{width:"100%",height:"100%",display:"flex","flex-direction":"row-reverse"},".title-back-wrapper":{width:"100%",height:"100%",display:"flex",position:"absolute","flex-direction":"row","z-index":"-1"},".x-labels-back-wrapper":{width:"70%",height:"5%",top:"87%",left:"16%",position:"absolute",display:"flex","flex-direction":"row-reverse"},".x-labels-container":{"font-family":t.fontFamily,background:"transparent",width:"70%",height:"5%",top:"87%",left:"16%",position:"absolute",display:"flex","align-items":"center","z-index":"1","justify-content":"space-around"},".letter-wrapper":{"font-size":t.fontSize,display:"flex","flex-direction":"column",position:"relative"},".letter-container":{overflow:"hidden",position:"relative"},".title-container":{"font-family":t.fontFamily,background:"transparent",width:"70%",height:"fit-content","min-height":"5%","max-height":"7%",top:"7%",left:"16%",position:"absolute",display:"flex","z-index":"1","justify-content":"space-around"},".title-wrapper":{display:"flex","flex-grow":"2","flex-wrap":"wrap","align-items":"center",overflow:"hidden","padding-left":"6px","z-index":"1"},".subtitle-wrapper":{display:"flex","z-index":"1","flex-wrap":"wrap","align-items":"center"},".subtitle-position-end":{display:"flex","flex-grow":"1","padding-right":"6px","flex-wrap":"wrap","max-width":"34%",overflow:"hidden","justify-content":"flex-end"},".label-container":{position:"relative",top:"1px",display:"flex","flex-direction":"row",overflow:"hidden"},".container-barChart":{width:"100%",height:"100%",background:t.backgroundC,display:"flex"},".graph-container":{left:"16%",top:"17%",width:"70%",height:"63%",position:"absolute"},".fontColorOn":{color:t.fontC},".space-char":{visibility:"hidden"},".accent-background":{width:"100%",height:"100%",background:t.accentC,position:"relative"}};return t.data.map(((e,n)=>{i[`.${e.name}-bar-${n}`]={"align-self":"flex-end",width:100/t.data.length+"%",margin:`0% ${10/t.data.length+1}%`,height:"100%",display:"flex"},i[`.${e.name}-bar-${n}`].height=`\n            ${e.value.toFixed(2)/t.maxPoint*100}%`,i[`.${e.name}-bar-fill`]={height:"100%"}})),o(i)}(this)}get fonts(){return[{type:"google-font",src:`${this.url}`}]}buildTree(){if(e(this,".container-barChart"),this.attrs.timings.intro){const i=.75*this.introDur,e=new t.Group,n=new t.Combo({incidents:[{incidentClass:t.CSSEffect,attrs:{animatedAttrs:{height:"70%"},initialValues:{height:"0%"}},props:{selector:".y-axis",duration:Math.trunc(.2*this.introDur),easing:"easeInQuad"},position:Math.trunc(0*this.introDur)},{incidentClass:t.CSSEffect,attrs:{animatedAttrs:{width:"74%"},initialValues:{width:"0%"}},props:{selector:".x-axis",duration:Math.trunc(.3*this.introDur),easing:"easeOutQuad"},position:Math.trunc(.2*this.introDur)}]},{selector:".container-barChart"});e.addIncident(n,0*this.introDur);const a=new t.CSSEffect({animatedAttrs:{width:"100%"},initialValues:{width:"0%"}},{selector:".gridLine",duration:Math.trunc(.5*this.introDur),easing:"easeOutQuad"});e.addIncident(a,Math.trunc(.2*this.introDur));const s=new t.Group;s.addIncident(new t.CSSEffect({animatedAttrs:{width:"100%"},initialValues:{width:"0%"}},{selector:".title-background",duration:Math.trunc(.25*this.introDur),easing:"easeInOutQuad"}),0);const o=2*(.7*this.introDur)/(this.title.length+1),r=[];for(const i in this.title)r.push({incidentClass:t.CSSEffect,attrs:{animatedAttrs:{left:"0px",opacity:1},initialValues:{left:"20px",opacity:0}},props:{selector:`#letter-${i}`,duration:Math.trunc(o),easing:"easeOutQuart"},position:Math.trunc(o*i/2)});const l=new t.Combo({incidents:r},{selector:".title-wrapper"});s.addIncident(l,Math.trunc(.25*this.introDur));const h=2*(.8*this.introDur)/(this.subtitle.length+1),c=[];for(const i in this.subtitle)c.push({incidentClass:t.CSSEffect,attrs:{animatedAttrs:{left:"0px",opacity:1},initialValues:{left:"20px",opacity:0}},props:{selector:`#letter-${i}`,duration:Math.trunc(h),easing:"easeOutQuart"},position:Math.trunc(h*i/2)});const d=new t.Combo({incidents:c},{selector:".subtitle-wrapper"});s.addIncident(d,Math.trunc(.1*this.introDur)),e.addIncident(s,Math.trunc(.05*this.introDur));const u=new t.Group;u.addIncident(new t.CSSEffect({animatedAttrs:{width:"70%"},initialValues:{width:"0%"}},{selector:".x-labels-back-wrapper",duration:Math.trunc(.25*this.introDur),easing:"easeInOutCubic"}),0);const p=2*i/(this.data.length+1);for(const e in this.data){const n=2*p/(this.data[e].name.length+1),a=[];for(const i in this.data[e].name)a.push({incidentClass:t.CSSEffect,attrs:{animatedAttrs:{top:"0px",opacity:1},initialValues:{top:"-30px",opacity:0}},props:{selector:`#letter-${e}-${i}`,duration:Math.trunc(n),easing:"easeOutQuart"},position:Math.trunc(n*i/2)});const s=new t.Combo({incidents:a},{selector:".label-container"});u.addIncident(s,Math.trunc(i/(this.data.length+1)*e))}e.addIncident(u,Math.trunc(.05*this.introDur));const g=new t.Combo({incidents:[{incidentClass:t.CSSEffect,attrs:{animatedAttrs:{height:"100%"},initialValues:{height:"0%"}},props:{duration:Math.trunc(.3*this.introDur),easing:"easeInOutQuad"},position:0}]},{selector:".bar-fill",delay:`@stagger(0, ${Math.trunc(.4*this.introDur)})`});e.addIncident(g,Math.trunc(.3*this.introDur)),this.addIncident(e,0*this.introDur)}if(this.attrs.timings.outro){const i=.75*this.outroDur,e=new t.Group,n=new t.Combo({incidents:[{incidentClass:t.CSSEffect,attrs:{animatedAttrs:{width:"0%"},initialValues:{width:"74%"}},props:{selector:".x-axis",duration:Math.trunc(.2*this.outroDur),easing:"easeInQuad"},position:0*this.outroDur},{incidentClass:t.CSSEffect,attrs:{animatedAttrs:{height:"0%"},initialValues:{height:"70%"}},props:{selector:".y-axis",duration:Math.trunc(.3*this.outroDur),easing:"easeOutQuad"},position:Math.trunc(.2*this.outroDur)}]},{selector:".container-barChart"});e.addIncident(n,Math.trunc(.5*this.outroDur));const a=new t.CSSEffect({animatedAttrs:{width:"0%"},initialValues:{width:"100%"}},{selector:".gridlines",easing:"easeInOutQuad",duration:Math.trunc(.5*this.outroDur)});e.addIncident(a,Math.trunc(.2*this.outroDur));const s=new t.Group;s.addIncident(new t.CSSEffect({animatedAttrs:{width:"0%"},initialValues:{width:"100%"}},{selector:".title-back-animHelper",duration:Math.trunc(.45*this.outroDur),easing:"easeInOutQuad"}),Math.trunc(.3*this.outroDur));const o=2*(.8*this.outroDur)/(this.title.length+1),r=[];for(const i in this.title)r.push({incidentClass:t.CSSEffect,attrs:{animatedAttrs:{left:"20px",opacity:0},initialValues:{left:"0px",opacity:1}},props:{selector:`#letter-${i}`,duration:Math.trunc(o),easing:"easeOutQuart"},position:Math.trunc(o*(this.title.length-i-1)/2)});const l=new t.Combo({incidents:r},{selector:".title-wrapper"});s.addIncident(l,Math.trunc(.1*this.outroDur));const h=2*(.4*this.outroDur)/(this.subtitle.length+1),c=[];for(const i in this.subtitle)c.push({incidentClass:t.CSSEffect,attrs:{animatedAttrs:{left:"20px",opacity:0},initialValues:{left:"0px",opacity:1}},props:{selector:`#letter-${i}`,duration:Math.trunc(h),easing:"easeOutQuart"},position:Math.trunc(h*(this.subtitle.length-i-1)/2)});const d=new t.Combo({incidents:c},{selector:".subtitle-wrapper"});s.addIncident(d,Math.trunc(0*this.outroDur)),e.addIncident(s,Math.trunc(.05*this.outroDur));const u=new t.Group;u.addIncident(new t.CSSEffect({animatedAttrs:{width:"0%"},initialValues:{width:"100%"}},{selector:".x-labels-background",duration:Math.trunc(.45*this.outroDur),easing:"easeInOutCubic"}),.3*this.outroDur);const p=2*i/(this.data.length+1);for(const e in this.data){const n=2*p/(this.data[e].name.length+1),a=[];for(const i in this.data[e].name)a.push({incidentClass:t.CSSEffect,attrs:{animatedAttrs:{opacity:0,top:"-30px"},initialValues:{opacity:1,top:"0px"}},props:{selector:`#letter-${e}-${i}`,duration:Math.trunc(n),easing:"easeInQuart"},position:Math.trunc(n*i/2)});const s=new t.Combo({incidents:a},{selector:".label-container"});u.addIncident(s,Math.trunc(i/(this.data.length+1)*e))}e.addIncident(u,Math.trunc(.05*this.outroDur));const g=[];for(const i in this.data)g.push({incidentClass:t.CSSEffect,attrs:{animatedAttrs:{height:"0%"},initialValues:{height:"100%"}},props:{duration:Math.trunc(.3*this.outroDur),easing:"easeInOutCubic",selector:`#${this.data[i].name}-bar-fill`},position:Math.trunc(h*(this.data.length-i-1)/2)});const m=new t.Combo({incidents:g},{selector:".graph"});e.addIncident(m,0*this.outroDur),this.addIncident(e,0+this.introDur+this.staticDur)}const i=new t.CSSEffect({animatedAttrs:{}},{selector:".container-barChart",duration:this.staticDur});this.addIncident(i,this.introDur)}buildVars(){this.data=this.attrs.data.data,this.title=this.attrs.data.title,this.subtitle=this.attrs.data.subtitle,this.maxPoint=0,this.gridLinesNum=this.attrs.data.showGrid?11:0,this.attrs.palette=this.attrs.palette||{},this.primaryC=this.attrs.palette.primary||i.gray,this.secondaryC=this.attrs.palette.secondary||i.lightGray,this.tertiaryC=this.attrs.palette.tertiary||i.darkGray,this.fontC=this.attrs.palette.font||i.font,this.accentC=this.attrs.palette.accent||i.accent,this.backgroundC=this.attrs.palette.background||i.background,this.attrs.font=this.attrs.font||{},this.fontFamily=this.attrs.font.fontFamily||"'Staatliches', cursive",this.fontSize=this.attrs.font.size||"1.7rem",this.url=this.attrs.font.url||"https://fonts.googleapis.com/css2?family=Staatliches&display=swap",this.attrs.timings=this.attrs.timings||{},this.introDur=this.attrs.timings.intro||0,this.outroDur=this.attrs.timings.outro||0,this.staticDur=this.attrs.timings.static??1e3}}class l extends t.Effect{getScratchValue(){return 0}onGetContext(){this.element.innerHTML=this.initialValue}onProgress(t){let i=this.initialValue+(this.targetValue-this.initialValue)*this.getFraction(t);i=this.attrs.decimals?i.toFixed(this.attrs.decimals):Math.trunc(i),this.element.innerHTML=i}}var h={npm_name:"@donkeyclip/motorcortex-counter",version:"2.1.2",incidents:[{exportable:l,name:"Counter",attributesValidationRules:{animatedAttrs:{type:"object",props:{count:{type:"number"}}},decimals:{type:"number",optional:!0,min:0,max:20,integer:!0}}}]};const c=t.loadPlugin(h);class d extends t.HTMLClip{get html(){const t=this.attrs.data.map(((t,i)=>{var e;return`<div class="row row-${i}">\n          <div class="bar-header">${t.name}</div>\n          <div class="container-bar container-bar-${i}">\n            <div\n              class="inner-bar inner-bar-${i} ${t.value<this.criticalValue?"extra-trunced-"+i:""}"\n            ></div>\n          </div>\n          <div class="text indicator-${i}">${t.value}</div>\n          <div class="text text-unit">\n            ${null!==(e=this.attrs.options)&&void 0!==e&&e.hidePercentage?"":"%"}\n          </div>\n        </div>`}));return`<div class="container-progressBar">${t.join("")}</div>`}get css(){const t={barSum:this.barSum,barCount:this.barCount,data:this.attrs.data,palette:this.attrs.palette?this.attrs.palette:{},font:this.attrs.font?this.attrs.font:{},options:this.attrs.options?this.attrs.options:{}},e={".container-progressBar":{height:"100%",background:t.palette.background||i.background,display:"flex",color:t.palette.font||i.font,"font-family":t.font.fontFamily||"'Staatliches', cursive"},".row":{display:"flex","flex-direction":"row",position:"absolute",left:"20%","align-items":"center",height:60/t.barCount+"%",width:"100%"},".container-bar":{position:"absolute",height:"100%",background:t.palette.secondary?t.palette.secondary:i.darkGray,"border-radius":"4rem",width:"60%","box-shadow":"2px 2px 5px gray",border:`0.2rem solid ${t.palette.accent||i.accent}`,"z-index":"1",overflow:"hidden"},".inner-bar":{position:"relative",background:t.palette.primary||i.lightGray,height:"102%","border-radius":"4rem",bottom:"-1px","z-index":"2px",top:"-0.5px"},".text":{position:"relative","z-index":"0",opacity:"1",left:"62%","font-size":t.font.size||"1.2rem"},".bar-header":{position:"absolute",left:"-21%","text-align":"right",width:"20%","font-size":t.font.size||"1.2rem"}},n=t.barSum/t.barCount;return t.data.forEach(((i,a)=>{e[`.row-${a}`]={bottom:50+100*(n-a)/t.barCount-60/t.barCount*2.15+"%"},e[`.inner-bar-${a}`]={width:`${i.value.toFixed(2)}%`}})),o(e)}get fonts(){var t;return[{type:"google-font",src:(null===(t=this.attrs.font)||void 0===t?void 0:t.url)||"https://fonts.googleapis.com/css2?family=Staatliches&display=swap"}]}buildTree(){var i;this.static=this.attrs.timings.static??1e3,this.intro=this.attrs.timings.intro||0,this.outro=this.attrs.timings.outro||0;const e=this.barSum/this.barCount;if(n(this,".container-progressBar"),null!==(i=this.attrs.timings)&&void 0!==i&&i.intro){const i=Math.floor(.33*this.intro),n=Math.floor(.25*this.intro),a=Math.floor(.33*this.intro);for(let s=0;s<this.barCount;s++){const o=new t.CSSEffect({animatedAttrs:{bottom:50+100*(e-s)/this.barCount-60/this.barCount*2.15+"%",opacity:1},initialValues:{bottom:`-${65/this.barCount}%`,opacity:0}},{duration:i,selector:`.row-${s}`,easing:"easeInOutQuad"}),r=new t.CSSEffect({animatedAttrs:{width:"60%"},initialValues:{width:"0.2%"}},{duration:n,selector:`.container-bar-${s}`,easing:"easeInOutQuad"}),l=new t.CSSEffect({animatedAttrs:{width:`${this.attrs.data[s].value.toFixed(2)}%`},initialValues:{width:"0%"}},{duration:a,selector:`.inner-bar-${s}`,easing:"easeInOutQuad"}),h=new c.Counter({animatedAttrs:{count:this.attrs.data[s].value},initialValues:{count:0}},{easing:"easeInOutQuad",selector:`.indicator-${s}`,duration:a});this.addIncident(o,0),this.addIncident(r,i),this.addIncident(l,i+n),this.addIncident(h,i+n)}const s=new t.CSSEffect({animatedAttrs:{left:"62%",opacity:1},initialValues:{left:"0%",opacity:0}},{duration:a,selector:".text",easing:"easeInOutQuad"});this.addIncident(s,i)}const a=new t.CSSEffect({animatedAttrs:{}},{duration:this.static,selector:".container-progressBar"});if(this.addIncident(a,this.intro),this.outro){const i=this.intro+this.static+this.outro,n=Math.floor(.33*this.outro),a=Math.floor(.25*this.outro),s=Math.floor(.33*this.outro);for(let o=0;o<this.barCount;o++){const r=new t.CSSEffect({animatedAttrs:{bottom:`-${65/this.barCount}%`,opacity:0},initialValues:{bottom:50+100*(e-o)/this.barCount-60/this.barCount*2.15+"%",opacity:1}},{duration:n,selector:`.row-${o}`,easing:"easeInOutQuad"}),l=new t.CSSEffect({animatedAttrs:{width:"0.2%"},initialValues:{width:"60%"}},{duration:a,selector:`.container-bar-${o}`,easing:"easeInOutQuad"}),h=new t.CSSEffect({animatedAttrs:{width:"0%"},initialValues:{width:`${this.attrs.data[o].value.toFixed(2)}%`}},{duration:s,selector:`.inner-bar-${o}`,easing:"easeInOutQuad"}),d=new c.Counter({animatedAttrs:{count:0},initialValues:{count:this.attrs.data[o].value}},{easing:"easeInOutQuad",selector:`.indicator-${o}`,duration:s});this.addIncident(r,i-n),this.addIncident(l,i-n-a),this.addIncident(h,i-n-a-s),this.addIncident(d,i-n-a-s)}const o=new t.CSSEffect({animatedAttrs:{left:"0%",opacity:0},initialValues:{left:"62%",opacity:1}},{duration:s,selector:".text",easing:"easeInOutQuad"});this.addIncident(o,i-n-1.1*a)}}get barSum(){let t=0;for(let i=1;i<=this.barCount;i++)t+=i;return t}get barCount(){return this.attrs.data.length}get criticalValue(){const t=this.barCount/10;return 1===t?10*t:t>1?10*(t-1):10*(t+1)}}var u={lineGraph:{originalDims:{width:1200,height:900}}};class p extends t.Effect{getScratchValue(){return this.pathLength=Math.ceil(this.element.getTotalLength()),this.element.style.strokeDasharray="".concat(this.pathLength," ").concat(this.pathLength),this.element.style.strokeDashoffset=this.pathLength,0}onGetContext(){this.pathLength=Math.ceil(this.element.getTotalLength())}onProgress(t){const i=(this.targetValue-this.initialValue)*this.getFraction(t)+this.initialValue;this.element.style.strokeDashoffset=Math.ceil(this.pathLength*(1-i))}}var g={npm_name:"@donkeyclip/motorcortex-svgdraw",version:"1.2.0",incidents:[{exportable:p,name:"Draw",attributesValidationRules:{animatedAttrs:{type:"object",props:{cover:{type:"number",min:0,max:1}}}}}]};class m{constructor(t){this.el=t,this.matrix=this.getMatrix(t),this.viewportCenter=this.getViewPortCenter(),this.idlePosition=this.getIdlePosition()}getMatrix(t){return function(t){const i=window.getComputedStyle(t).transform;return""===i||"none"===i?{rotate:"0deg",scaleX:1,scaleY:1,skewX:"0deg",skewY:"0deg",translateX:"0px",translateY:"0px"}:function(t){const i=Math.atan2(t[1],t[0]),e=Math.pow(t[0],2)+Math.pow(t[1],2),n=Math.pow(t[2],2)+Math.pow(t[3],2),a=Math.sqrt(e),s=(t[0]*t[3]-t[2]*t[1])/a,o=Math.atan2(t[0]*t[2]+t[1]*t[3],e),r=Math.atan2(t[1]*t[3]+t[0]*t[2],n);return{rotate:i/(Math.PI/180)+"deg",scaleX:a,scaleY:s,skewX:(1===e?o/(Math.PI/180):0)+"deg",skewY:(1===n?r/(Math.PI/180):0)+"deg",translateX:t[4]+"px",translateY:t[5]+"px"}}(i.split("(")[1].split(")")[0].split(","))}(t)}getViewPortCenter(){const t=this.el.parentNode;return{x:parseFloat(getComputedStyle(t,null).width.replace("px",""))/2,y:parseFloat(getComputedStyle(t,null).height.replace("px",""))/2}}getIdlePosition(){const t=this.el,i=t.getBoundingClientRect(),e=t.parentNode.getBoundingClientRect();return{x:i.left-e.left,y:i.top-e.top}}calcXYZoom(){const t=this.matrix,i=this.idlePosition,e=this.viewportCenter,n=e.x-i.x,a=e.y-i.y;return{...{x:n/t.scaleX,y:a/t.scaleY},zoom:t.scaleX}}createProgressFunction(t){const i=this._xyzoomToTranslate(t.start),e=this._xyzoomToTranslate(t.target),n=Math.atan(Math.abs(e.y-i.y)/Math.abs(e.x-i.x)),a=Math.sqrt(Math.pow(e.y-i.y,2)+Math.pow(e.x-i.x,2));let s=1,o=1;return e.x<i.x&&(s=-1),e.y<i.y&&(o=-1),function(t){const r=t*a;return{translateX:s*r*Math.cos(n)+i.x,translateY:o*r*Math.sin(n)+i.y,scale:(e.scale-i.scale)*t+i.scale}}}_xyzoomToTranslate(t){const i=t.zoom*t.x,e=t.zoom*t.y,n=this.viewportCenter.x-i,a=this.viewportCenter.y-e;return{x:n-this.idlePosition.x,y:a-this.idlePosition.y,scale:t.zoom}}createPathProgressFunction(t,i){let e=t=>{};t.transitionDuration>0&&(e=this.createProgressFunction({start:i,target:{x:t.startPoint.x,y:t.startPoint.y,zoom:i.zoom}}));const n=t.transitionDuration/(t.transitionDuration+t.alongPathDuration),a=t.alongPathDuration/(t.transitionDuration+t.alongPathDuration),s=(t.endTo-t.startFrom)*t.pathLength;return o=>{if(t.transitionDuration>0&&o<n)return e(o/n);const r=(o-n)/a,l=(t.zoom-i.zoom)*r+i.zoom,h=r*s+t.startFrom*t.pathLength,c=t.path.getPointAtLength(h),d=this._xyzoomToTranslate({x:c.x,y:c.y,zoom:l});return{translateX:d.x,translateY:d.y,scale:d.scale}}}}class f extends t.Effect{getScratchValue(){return this.adaptor=new m(this.element),this.adaptor.calcXYZoom()}onGetContext(){this.adaptor=new m(this.element),this.progressMethod=this.adaptor.createProgressFunction({start:this.initialValue,target:this.targetValue})}onProgress(t){const i=this.progressMethod(this.getFraction(t));this.element.style.transform="translateX(".concat(i.translateX,"px) translateY(").concat(i.translateY,"px) scaleX(").concat(i.scale,") scaleY(").concat(i.scale,")")}}var b={npm_name:"@donkeyclip/motorcortex-2dcam",version:"0.3.1",incidents:[{exportable:f,name:"ZoomTo",attributesValidationRules:{animatedAttrs:{type:"object",props:{position:{type:"object",props:{x:{type:"number",optional:!0,min:0},y:{type:"number",optional:!0,min:0},zoom:{type:"number",optional:!0,min:0}}}}}}},{exportable:class extends f{onInitialise(){const t=this.props.duration,i=document.createElementNS("http://www.w3.org/2000/svg","path");i.setAttributeNS(null,"d",this.targetValue.path),this.data={path:i,finalPoint:null,startPoint:null,zoom:this.targetValue.zoom,pathLength:i.getTotalLength(),startFrom:this.attrs.from?this.attrs.from:0,endTo:this.attrs.to?this.attrs.to:1,transitionDuration:this.attrs.transition?this.attrs.transition:0,get alongPathDuration(){return t-this.transitionDuration}},this.data.finalPoint=i.getPointAtLength(this.data.endTo*this.data.pathLength),this.data.startPoint=i.getPointAtLength(this.data.startFrom*this.data.pathLength),this.targetValue.x=this.data.finalPoint.x,this.targetValue.y=this.data.finalPoint.y}onGetContext(){this.adaptor=new m(this.element),this.data.zoom=this.targetValue.zoom,this.progressMethod=this.adaptor.createPathProgressFunction(this.data,this.initialValue)}},name:"FollowPath",attributesValidationRules:{animatedAttrs:{type:"object",props:{position:{type:"object",props:{path:{type:"string",optional:!1},zoom:{type:"number",optional:!0,min:0}}}}},transition:{type:"number",integer:!0,min:0,optional:!0},from:{type:"number",min:0,max:1,optional:!0},to:{type:"number",min:0,max:1,optional:!0}}}],compositeAttributes:{position:["x","y","zoom","path"]}};const y=t.loadPlugin(g),w=t.loadPlugin(b);class x{constructor(t){this.instance=t}buildStaticControl(){return new t.CSSEffect({animatedAttrs:{}},{selector:".container-lineGraph",duration:this.instance.staticDur})}buildBackgroundIntro(){return new t.CSSEffect({animatedAttrs:{height:"70%"},initialValues:{height:"0%"}},{selector:".graph-background",duration:Math.trunc(.2*this.instance.introDur),easing:"easeInOutQuart"})}buildBackgroundOutro(){return new t.CSSEffect({animatedAttrs:{height:"0%"},initialValues:{height:"70%"}},{selector:".graph-background",duration:Math.trunc(.2*this.instance.outroDur),easing:"easeInOutQuart"})}buildTitleIntroCombo(){const i=.13*this.instance.introDur,e=[];for(const n in this.instance.words)e.push({incidentClass:t.CSSEffect,attrs:{animatedAttrs:{top:"0px",opacity:1},initialValues:{top:"-50px",opacity:0}},props:{selector:`#word-${n}`,duration:Math.trunc(i/this.instance.words.length),easing:"easeInOutQuart"},position:Math.trunc(i/this.instance.words.length*n)});return new t.Combo({incidents:e},{selector:".title-wrapper-lineGraph"})}buildTitleOutroCombo(){const i=.13*this.instance.outroDur,e=[];for(const n in this.instance.words)e.push({incidentClass:t.CSSEffect,attrs:{animatedAttrs:{top:"-50px",opacity:0},initialValues:{top:"0px",opacity:1}},props:{selector:`#word-${n}`,duration:Math.trunc(i/this.instance.words.length),easing:"easeInOutQuart"},position:Math.trunc(i/this.instance.words.length*(this.instance.words.length-1-n))});return new t.Combo({incidents:e},{selector:".title-wrapper-lineGraph"})}buildIntroLegend(){const i=.25*this.instance.introDur,e=i/this.instance.dataSetsNum,n=1===this.instance.dataSetsNum?null:`@stagger(0, ${i-e})`,a=[{incidentClass:t.CSSEffect,attrs:{animatedAttrs:{height:`${this.instance.legendHeight}%`},initialValues:{height:"0%"}},props:{duration:Math.trunc(.2*this.instance.introDur),easing:"easeInOutQuart"},position:0},{incidentClass:t.CSSEffect,attrs:{animatedAttrs:{opacity:1},initialValues:{opacity:0}},props:{selector:".color-wrapper",duration:Math.trunc(.1*this.instance.introDur),delay:n,easing:"easeInOutQuad"},position:Math.trunc(.15*this.instance.introDur)},{incidentClass:t.CSSEffect,attrs:{animatedAttrs:{opacity:1},initialValues:{opacity:0}},props:{selector:".line-title",duration:Math.trunc(.1*this.instance.introDur),delay:n,easing:"easeInOutQuad"},position:Math.trunc(.15*this.instance.introDur)}];return new t.Combo({incidents:a},{selector:".legend-wrapper"})}buildOutroLegend(){const i=.25*this.instance.outroDur,e=i/this.instance.dataSetsNum,n=1===this.instance.dataSetsNum?null:`@stagger(0, ${i-e}, 0, linear, linear, true)`,a=[{incidentClass:t.CSSEffect,attrs:{animatedAttrs:{height:"0%"},initialValues:{height:`${this.instance.legendHeight}%`}},props:{duration:Math.trunc(.2*this.instance.introDur),easing:"easeInOutQuart"},position:i},{incidentClass:t.CSSEffect,attrs:{animatedAttrs:{opacity:1},initialValues:{opacity:0}},props:{selector:".color-wrapper",duration:Math.trunc(.1*this.instance.introDur),delay:n,easing:"easeInOutQuad"},position:Math.trunc(i-.15*this.instance.introDur)},{incidentClass:t.CSSEffect,attrs:{animatedAttrs:{opacity:1},initialValues:{opacity:0}},props:{selector:".line-title",duration:Math.trunc(.1*this.instance.introDur),delay:n,easing:"easeInOutQuad"},position:Math.trunc(i-.15*this.instance.introDur)}];return new t.Combo({incidents:a},{selector:".legend-wrapper"})}buildIntroLabels(){const i=new t.Group;i.addIncident(new t.CSSEffect({animatedAttrs:{width:"100%"},initialValues:{width:"0%"}},{selector:".block-background",duration:Math.trunc(.25*this.instance.introDur),easing:"easeInOutQuart"}),0);const e=.2*this.instance.introDur,n=3*e/(this.instance.data.length+2);for(const a in this.instance.data){let s=n/2;const o=[];for(const i in this.instance.data[a].name)o.push({incidentClass:t.CSSEffect,attrs:{animatedAttrs:{opacity:1},initialValues:{opacity:0}},props:{selector:`#letter-${a}-${i}`,duration:Math.trunc(.015*this.instance.introDur),easing:"easeInOutQuart"},position:Math.trunc(n-s)}),s/=2;const r=new t.Combo({incidents:o},{selector:".label-container"});i.addIncident(r,Math.trunc(.14*this.instance.introDur+e/(this.instance.data.length+1)*(this.instance.data.length-a-1)))}return i}buildOutroLabels(){const i=new t.Group,e=.55*this.instance.outroDur;i.addIncident(new t.CSSEffect({animatedAttrs:{width:"0%"},initialValues:{width:"100%"}},{selector:".block-background",duration:Math.trunc(.55*e),easing:"easeInOutQuart"}),0*e);const n=.2*this.instance.outroDur,a=3*n/(this.instance.data.length+2);for(const e in this.instance.data){let s=a/2;const o=[];for(const i in this.instance.data[e].name)o.push({incidentClass:t.CSSEffect,attrs:{animatedAttrs:{opacity:0},initialValues:{opacity:1}},props:{selector:`#letter-${e}-${i}`,duration:Math.trunc(.015*this.instance.outroDur),easing:"easeInOutQuart"},position:Math.trunc(a-(a-s))}),s/=2;const r=new t.Combo({incidents:o},{selector:".label-container"});i.addIncident(r,Math.trunc(n*e/(this.instance.data.length+1)))}return i}buildIntroStele(){const i=new t.Group,e=5*(.3*this.instance.introDur)/(this.instance.data.length+1),n=e/5,a=3*e/(this.instance.steleBlockNum+1);if("steles"===this.instance.grid)for(const s in this.instance.data){const o=new t.Group({selector:`#stele-${s}`}),r=new t.Combo({incidents:[{incidentClass:t.CSSEffect,attrs:{animatedAttrs:{opacity:1},initialValues:{opacity:0}},props:{duration:Math.trunc(a)},position:0}]},{selector:`.stele-block-${s}`,delay:`@stagger(0, ${Math.trunc(e-a)}, 0, easeOutQuad)`});o.addIncident(r,0),i.addIncident(o,Math.trunc(s*n))}else if("lines"===this.instance.grid){const s=new t.Group({selector:"#stele-0"}),o=new t.Combo({incidents:[{incidentClass:t.CSSEffect,attrs:{animatedAttrs:{width:"100%"},initialValues:{width:"0%"}},props:{duration:Math.trunc(e),easing:"easeInOutQuad"},position:0}]},{selector:".stele-block-0",delay:`@stagger(0, ${Math.trunc(e-a)}, 0)`});s.addIncident(o,0),i.addIncident(s,Math.trunc(n))}return i}buildOutroStele(){const i=new t.Group,e=5*(.3*this.instance.outroDur)/(this.instance.data.length+1),n=e/5,a=3*e/(this.instance.steleBlockNum+1);if("steles"===this.instance.grid)for(const s in this.instance.data){const o=new t.Group({selector:`#stele-${s}`}),r=new t.Combo({incidents:[{incidentClass:t.CSSEffect,attrs:{animatedAttrs:{opacity:0},initialValues:{opacity:1}},props:{duration:Math.trunc(a)},position:0}]},{selector:`.stele-block-${s}`,delay:`@stagger(0, ${Math.trunc(e-a)}, 0, easeOutQuad, omni, true)`});o.addIncident(r,0),i.addIncident(o,(this.instance.data.length-1-s)*n)}else if("lines"===this.instance.grid){const s=new t.Group({selector:"#stele-0"}),o=new t.Combo({incidents:[{incidentClass:t.CSSEffect,attrs:{animatedAttrs:{width:"0%"},initialValues:{width:"100%"}},props:{duration:Math.trunc(e),easing:"easeInOutQuad"},position:0}]},{selector:".stele-block-0",delay:`@stagger(0, ${Math.trunc(e-a)}, 0, linear, omni, true)`});s.addIncident(o,0),i.addIncident(s,(this.instance.data.length-1)*n)}return i}buildIntroGraph(i){const e=this.instance.introDur/this.instance.data.length,n=.35*e,a=.8*e,s=new t.Group,o=new t.Group;for(let r=0;r<this.instance.dataSetsNum;r++)for(let l=0;l<this.instance.data.length;l++){if(l!==this.instance.data.length-1){const t=new y.Draw({animatedAttrs:{cover:1},initialValues:{cover:0}},{selector:`#line-${r}-${l}`,duration:Math.trunc(a),easing:"easeInOutQuad"});s.addIncident(t,Math.trunc(e*l+.2*e))}const h=new t.CSSEffect({animatedAttrs:{opacity:1,r:`${this.instance.r}%`},initialValues:{opacity:0,r:"0"}},{selector:`#point-${r}-${l}`,duration:Math.trunc(n),easing:"easeInQuart"});o.addIncident(h,Math.trunc(e*l));const c=this.instance.findPointY(l,r)-.083*this.instance.linesHeight,d=c+.07*this.instance.linesHeight/2;let u=this.instance.data.length>2?10:5*this.instance.data.length;u=u<6?6:u;const p=this.instance.findPointX(l)-u*this.instance.linesWidth/100*.5,g=p+this.instance.linesWidth*(u/100)/2,m=new t.CSSEffect({animatedAttrs:{opacity:.6,width:`${u}%`,"min-width":`${u}%`,height:"7%",top:`${c}px`,left:`${p}px`,"font-size":this.instance.fontSizeInner},initialValues:{opacity:0,width:"0%","min-width":"0%",height:"0%",top:`${d}px`,left:`${g}px`,"font-size":0}},{selector:`.label-${r}-${this.instance.data[l].name}`,duration:Math.trunc(n),easeing:"easeInOutCubic"});if(i.addIncident(m,Math.trunc(e*l+.2*n)),this.instance.trace){const[t,a,s,o,r,h,c,d]=[...this.buildSvgIntroParams(l,n,e)],u=new w.ZoomTo({animatedAttrs:{position:{x:h,y:c,zoom:d}},initialValues:{position:{x:s,y:o,zoom:r}}},{selector:".viewport-lineGraph",duration:Math.trunc(a),easing:"easeInOutQuad"});i.addIncident(u,Math.trunc(t))}}return[i,s,o]}buildSvgIntroParams(t,i,e){let n,a,s,o=0,r=0,l=this.instance.findPointX(t)+(1-this.instance.graphScale.width)/2*u.lineGraph.originalDims.width,h=this.instance.findPointY(t,0)+(1-this.instance.graphScale.height)/2*u.lineGraph.originalDims.height,c=this.instance.traceScale;return 0===t?(n=.5*u.lineGraph.originalDims.width,a=.5*u.lineGraph.originalDims.height,s=this.instance.traceScale,r=i-.15*e,o=0):t===this.instance.data.length-1?(n=this.instance.findPointX(t-1)+(1-this.instance.graphScale.width)/2*u.lineGraph.originalDims.width,a=this.instance.findPointY(t-1,0)+(1-this.instance.graphScale.height)/2*u.lineGraph.originalDims.height,s=this.instance.traceScale,l=.5*u.lineGraph.originalDims.width,h=.5*u.lineGraph.originalDims.height,c=1,o=e*(t-1)+i,r=e+i-.15*e):(n=this.instance.findPointX(t-1)+(1-this.instance.graphScale.width)/2*u.lineGraph.originalDims.width,a=this.instance.findPointY(t-1,0)+(1-this.instance.graphScale.height)/2*u.lineGraph.originalDims.height,s=this.instance.traceScale,r=e,o=e*(t-1)+i),[o,r,n,a,s,l,h,c]}buildOutroGraph(i){const e=this.instance.outroDur/(this.instance.data.length+1),n=.25*e,a=.8*e,s=this.instance.trace?1:0,o=new t.Group,r=new t.Group;for(let l=0;l<this.instance.dataSetsNum;l++){const h=new t.Group;for(let i=0;i<this.instance.data.length;i++){if(i!==this.instance.data.length-1){const t=new y.Draw({animatedAttrs:{cover:0},initialValues:{cover:1}},{selector:`#line-${l}-${i}`,duration:Math.trunc(a),easing:"easeInOutQuad"});o.addIncident(t,Math.trunc(e*(this.instance.data.length+s-i-2)+.2*e))}const c=new t.CSSEffect({animatedAttrs:{opacity:0,r:"0"},initialValues:{opacity:1,r:`${this.instance.r}%`}},{selector:`#point-${l}-${i}`,duration:Math.trunc(n),easeing:"easeOutCubic"});r.addIncident(c,Math.trunc(e*(this.instance.data.length+s-i-1)));const d=this.instance.findPointY(i,l)-.083*this.instance.linesHeight,u=d+.07*this.instance.linesHeight/2;let p=5*this.instance.data.length>10?10:5*this.instance.data.length;p=p<6?6:p;const g=this.instance.findPointX(i)-p*this.instance.linesWidth/100*.5,m=g+this.instance.linesWidth*(p/100)/2,f=new t.CSSEffect({animatedAttrs:{opacity:0,width:"0%","min-width":"0%",height:"0%",top:`${u}px`,left:`${m}px`,"font-size":0},initialValues:{opacity:.6,width:`${p}%`,"min-width":`${p}%`,height:"7%",top:`${d}px`,left:`${g}px`,"font-size":this.instance.fontSizeInner}},{selector:`.label-${l}-${this.instance.data[i].name}`,duration:Math.trunc(n),easeing:"easeInOutCubic"});h.addIncident(f,Math.trunc(e*(this.instance.data.length+s-i-1)+.2*n))}i.addIncident(h,0)}return[i,o,r]}}class v extends t.HTMLClip{get html(){this.buildVars();const t=[];for(let i=0;i<this.words.length;i++)t.push(`<div id="word-${i}" class="fontColorOn letter-wrapper-title">${this.words[i]}</div>`),i!==this.words.length-1&&t.push('<div class="space-char letter-wrapper-title">-</div>');const i=[];if(this.legend){const t=[];for(let i=0;i<this.dataSetsNum;i++)t.push(`<div class="line-wrapper"><div class="color-wrapper">\n              <div class="line-color color-${i}"></div>\n            </div><div class="line-title">${this.dataSets[i].title}</div></div>`);i.push(`<div class="legend-wrapper">${t.join("")}</div>`)}const e=[];if("steles"===this.grid)for(const t in this.data){const i=[];for(let e=0;e<this.steleBlockNum;e++)i.push(`<div\n              class="stele-block-${t} stele-block stele-grid-block"}\n            ></div>`);e.push(`<div id="stele-${t}" class="data-stele stele-grid">${i.join("")}</div>`)}else if("lines"===this.grid){const t=[];for(let i=0;i<this.steleBlockNum;i++)t.push('<div class="stele-block-0 stele-block line-grid-block"></div>');e.push(`<div id="stele-0" class="data-stele line-grid">${t.join("")}</div>`)}const n=[];for(let t=0;t<this.dataSetsNum;t++){const i=[];for(let e=0;e<this.data.length;e++){const n=[],a=this.findPointX(e),s=this.findPointY(e,t);if(e!==this.data.length-1){const i=this.findPointX(e+1),o=this.findPointY(e+1,t);n.push(`<path\n              id="line-${t}-${e}"\n              class="line-${t}"\n              d="M ${a} ${s}L ${i} ${o}"\n              stroke="${this.dataSets[t].color}"\n              stroke-width="0.65%"\n              stroke-linecap="round"\n              fill="none"\n            />`)}n.push(`<circle\n            id="point-${t}-${e}"\n            class="point-${t} datapoint"\n            cx="${a}"\n            cy="${s}"\n            r="${this.r}%"\n            fill="${this.senaryC}"\n            stroke="${this.senaryC}"\n          />`),i.push(`<g>${n.join("")}</g>`)}n.push(`<g>${i.join("")}</g>`)}const a=[];a.push(`<svg\n        class="lines-container"\n        viewbox="0 0 ${this.linesWidth} ${this.linesHeight}"\n      >${n.join("")}</svg>`);const s=[];for(let t=0;t<this.dataSetsNum;t++){const i=[];for(let e=0;e<this.data.length;e++){const{name:n,values:a}=this.data[e];i.push(`<div>\n            <div\n              class="hoverPoint-${t}-${n} hoverPoint"\n            ></div>\n            <div\n              class="label-${t}-${n} inner-label-container"\n              id="label-${t}-${n}"\n            >\n              <div class="inner-label">\n                ${parseFloat(a[t].toFixed(2))} ${this.unit}\n              </div>\n            </div>\n          </div>`)}s.push(`<div class="line-${t}-label-container">${i.join("")}</div>`)}const o=[];for(const t in this.data){const i=[];this.data[t].name.length>4&&(this.data[t].name=this.data[t].name.slice(0,4));for(const e in this.data[t].name)i.push(`<div id="letter-${t}-${e}" class="letter-container">\n            <div class="letter-wrapper-label fontColorOn">\n              ${this.data[t].name[e]}\n            </div>\n          </div>`);o.push(`<div class="label-container" id="label-${t}">\n          ${i.join("")}\n        </div>`)}return`<div class="container-lineGraph">\n        <div class="viewport-lineGraph">\n          <div class="title-container-lineGraph">\n            <div class="title-wrapper-lineGraph">${t.join("")}</div>\n          </div>\n          ${i.join("")}\n          <div class="graph-background"></div>\n          <div class="dataStele-container">${e.join("")}</div>\n          <div class="svg-container">${a.join("")}</div>\n          <div class="graph-labels-container">${s.join("")}</div>\n          <div class="x-labels-container-lineGraph">${o.join("")}</div>\n          <div class="x-labels-back-wrapper-lineGraph">\n            <div class="block-background"></div>\n          </div>\n        </div>\n      </div>`}get css(){return function(t){const i={".container-lineGraph":{width:"100%",height:"100%",background:t.backgroundC,"font-family":t.fontFamily,"font-size":t.fontSizeTitle,display:"flex"},".viewport-lineGraph":{position:"absolute",top:t.legend?"2%":"0%","transform-origin":"top left",width:"100%",height:"100%"},".title-container-lineGraph":{background:"transparent",width:"60%",height:"10%",top:"8%",left:"8%",position:"absolute",display:"flex","align-items":"center","z-index":"1","justify-content":"space-around"},".title-wrapper-lineGraph":{display:"flex","flex-grow":"2","flex-wrap":"nowrap",overflow:"hidden","padding-left":"6px"},".letter-wrapper-title":{display:"flex","flex-direction":"column",position:"relative","font-size":"190%"},".legend-wrapper":{position:"absolute",width:(1===t.dataSetsNum?14:26)+"%",height:`${t.legendHeight}%`,top:11-3*(t.legendHeightFactor+(t.legendHeightFactor%1?1:0)-1)+"%",left:68+(1===t.dataSetsNum?12:0)+"%",background:t.quinaryC,"font-size":t.fontSizeInner,display:"flex","flex-wrap":t.attrs.legendWrrap?"wrap":"nowrap","align-items":"center","z-index":"1",padding:"0 10px"},".line-wrapper":{height:1/(t.legendHeightFactor+(t.legendHeightFactor%1?1:0))*100+"%",display:"flex",overflow:"hidden","flex-grow":1},".color-wrapper":{display:"flex","align-items":"center","justify-content":"center",width:"100%",height:"100%"},".line-color":{width:"60%",height:"60%"},".line-title":{display:"flex","align-items":"flex-start","justify-content":"flex-start","font-size":t.fontSizeInner,width:"75%",height:"100%"},".graph-background":{left:"10%",top:"13%",width:"80%",height:"70%",position:"absolute",background:t.secondaryC},".svg-container":{width:"76%",height:"58%",top:"21%",left:"12%",position:"relative","z-index":"1",overflow:"visible"},".lines-container":{width:"100%",height:"100%","min-height":"100%","min-width":"100%",overflow:"visible"},".dataStele-container":{width:"76%",height:"58%",top:"21%",left:"12%",position:"absolute",display:"flex","align-items":"center","justify-content":"space-around","z-index":"0"},".data-stele":{height:"100%",display:"flex","flex-direction":"column-reverse","justify-content":"space-between"},".line-grid":{width:"100%",height:"100%"},".stele-grid":{width:"1%",height:"100%"},".line-grid-block":{width:"100%",height:`${Math.trunc(t.linesHeight*(.13*t.gridH/t.steleBlockNum))}px`},".stele-grid-block":{width:"100%",height:`${Math.trunc(t.linesHeight*(.26*t.gridH/t.steleBlockNum))}px`},".stele-block":{"max-height":5*t.gridH+"px",opacity:"0.8",background:t.primaryC},".graph-labels-container":{width:"76%",height:"58%",top:"21%",left:"12%",position:"absolute"},".x-labels-back-wrapper-lineGraph":{width:"76%",height:"6%",top:"80%",left:"12%",position:"absolute",display:"flex","justify-content":"flex-end"},".block-background":{width:"100%",height:"100%",background:t.accentC,position:"relative"},".x-labels-container-lineGraph":{background:"transparent",width:"76%",height:"6%",top:"80%",left:"12%",position:"absolute",display:"flex","align-items":"center","z-index":"1","justify-content":"space-around"},".label-container":{display:"flex","flex-direction":"row",overflow:"hidden"},".letter-container":{overflow:"hidden",position:"relative"},".letter-wrapper-label":{"font-size":"100%",display:"flex","flex-direction":"column",position:"relative"},".fontColorOn":{color:t.fontC},".space-char":{visibility:"hidden"},".inner-label":{opacity:"1",display:"flex","justify-content":"center","align-items":"center",width:"100%",height:"100%"},".inner-label-container":{"font-size":t.fontSizeInner,opacity:"0.6",width:5*t.data.length+"%","min-width":"6%","max-width":"10%",height:"7%",position:"absolute",display:t.hover?"none":"block","z-index":"2"},".hoverPoint":{position:"absolute",width:.01*u.lineGraph.originalDims.width+"px",height:.01*u.lineGraph.originalDims.width+"px","border-radius":"50%","z-index":"9999"}};for(let e=0;e<t.dataSetsNum;e++){let n;n=t.dataSetsNum>1?t.dataSets[e].color:t.quaternaryC,i[`.color-${e}`]={background:n},i[`.line-${e}-label-container`]={width:"100%",height:"100%",position:"absolute"};for(let a=0;a<t.data.length;a++){const s=t.findPointY(a,e)-.083*t.linesHeight;let o=5*t.data.length>10?10:5*t.data.length;o=o<6?6:o;const r=t.findPointX(a)-o*t.linesWidth/100*.5;i[`.label-${e}-${t.data[a].name}`]={background:n,top:`${s}px`,left:`${r}px`};const l=o*t.linesWidth/100*.5-.01*u.lineGraph.originalDims.width/2,h=.07*t.linesHeight;i[`.hoverPoint-${e}-${t.data[a].name}`]={top:`${s+h}px`,left:`${r+l}px`}}}for(let e=0;e<t.dataSetsNum;e++)for(let n=0;n<t.data.length;n++)i[`.hoverPoint-${e}-${t.data[n].name}:hover + .label-${e}-${t.data[n].name}`]={display:"block"};return o(i)}(this)}get fonts(){return[{type:"google-font",src:`${this.url}`}]}buildTree(){if(e(this,".container-lineGraph"),this.attrs.timings.intro){let i=new t.Group;i.addIncident(this.animConstructor.buildBackgroundIntro(),0*this.introDur),i.addIncident(this.animConstructor.buildTitleIntroCombo(),Math.trunc(.14*this.introDur)),i.addIncident(this.animConstructor.buildIntroLegend(),Math.trunc(.1*this.introDur)),i.addIncident(this.animConstructor.buildIntroLabels(),Math.trunc(.18*this.introDur)),i.addIncident(this.animConstructor.buildIntroStele(),Math.trunc(.45*this.introDur));const e=.35*(this.introDur/this.data.length),[n,a,s]=this.animConstructor.buildIntroGraph(i);i=n,i.addIncident(a,Math.trunc(e)),i.addIncident(s,0),this.addIncident(i,0)}if(this.attrs.timings.outro){let i=new t.Group;i.addIncident(this.animConstructor.buildBackgroundOutro(),Math.trunc(.8*this.outroDur)),i.addIncident(this.animConstructor.buildTitleOutroCombo(),Math.trunc(.76*this.outroDur)),i.addIncident(this.animConstructor.buildOutroLegend(),Math.trunc(.1*this.outroDur)),i.addIncident(this.animConstructor.buildOutroLabels(),this.outroDur-.55*this.outroDur),i.addIncident(this.animConstructor.buildOutroStele(),.25*this.outroDur);const e=.25*(this.outroDur/(this.data.length+1)),[n,a,s]=[...this.animConstructor.buildOutroGraph(i)];i=n,i.addIncident(a,Math.trunc(e)),i.addIncident(s,0),this.addIncident(i,0+this.introDur+this.staticDur)}this.addIncident(this.animConstructor.buildStaticControl(),this.introDur)}buildVars(){this.animConstructor=new x(this),this.data=this.attrs.data.data,this.colorPalette=i,this.attrs.palette=this.attrs.palette||{},this.primaryC=this.attrs.palette.primary||this.colorPalette.gray,this.secondaryC=this.attrs.palette.secondary||this.colorPalette.lightGray,this.tertiaryC=this.attrs.palette.tertiary||this.colorPalette.darkGray,this.quaternaryC=this.attrs.palette.quaternary||this.colorPalette.whiteBack,this.quinaryC=this.attrs.palette.quinary||this.colorPalette.gray,this.senaryC=this.attrs.palette.senary||this.colorPalette.accent,this.fontC=this.attrs.palette.font||this.colorPalette.font,this.accentC=this.attrs.palette.accent||this.colorPalette.accent,this.backgroundC=this.attrs.palette.background||this.colorPalette.background,this.title=this.attrs.data.title,this.words=this.title.split(" "),this.dataSets=this.attrs.data.dataSets?this.attrs.data.dataSets:[{title:"",color:this.accentC}],this.dataSetsNum=this.dataSets.length;let t=2;this.dataSets.map(((i,e)=>{""!==i.color&&i.color||(i.color=this.colorPalette.dataColors[t],t++),""!==i.title&&i.title?i.title.length>10&&(i.title=i.title.substr(0,10)):i.title=`Dataset-${e+1}`})),this.legend=this.dataSetsNum>1||(this.attrs.legend||!1),this.maxPoint=0;for(const t of this.data)Math.max(...t.values)>this.maxPoint&&(this.maxPoint=Math.max(...t.values));this.maxPoint=this.attrs.data.maxValue?this.attrs.data.maxValue:this.maxPoint,this.hover=this.attrs.data.hover||!1,this.hover=1!==this.dataSetsNum||this.hover,this.grid=this.attrs.grid||"lines",this.grid="lines"!==this.grid&&"steles"!==this.grid?"lines":this.grid,this.gridH=this.attrs.gridH||1,this.attrs.trace=this.attrs.trace||{},this.trace=1===this.dataSetsNum&&this.attrs.trace.toggle||!1,this.traceScale=this.attrs.trace.scale||1.4,this.unit=this.attrs.data.unit||"%",this.interval=this.attrs.data.interval||5,this.steleBlockNum=this.maxPoint/this.interval+1,this.config=u,this.graphScale={width:.76,height:.58},this.legendHeightFactor=1===this.dataSetsNum?1:this.dataSetsNum/2,this.legendHeight=this.attrs.legendHeight?this.attrs.legendHeight:4*(this.legendHeightFactor+(this.legendHeightFactor%1?1:0)),this.linesWidth=s(this.props.containerParams.width).number*this.graphScale.width,this.linesHeight=s(this.props.containerParams.height).number*this.graphScale.height,this.steleWidth=.01*this.linesWidth,this.spaceAround=(this.linesWidth-this.steleWidth*this.data.length)/(2*this.data.length),this.r=this.attrs.dataPointR||.65,this.findPointX=t=>this.steleWidth/2+this.spaceAround+t*(2*this.spaceAround+this.steleWidth),this.findPointY=(t,i)=>this.linesHeight-this.data[t].values[i]*this.linesHeight/this.maxPoint,this.attrs.font=this.attrs.font||{},this.fontFamily=this.attrs.font.fontFamily||"'Staatliches', cursive",this.fontSizeLabel=this.attrs.font.size||"1.7rem",this.fontSizeTitle=1.5*s(this.fontSizeLabel).number+s(this.fontSizeLabel).unit,this.fontSizeInner=1*s(this.fontSizeLabel).number+s(this.fontSizeLabel).unit,this.url=this.attrs.font.url||"https://fonts.googleapis.com/css2?family=Staatliches&display=swap",this.attrs.timings=this.attrs.timings||{},this.introDur=this.attrs.timings.intro||0,this.outroDur=this.attrs.timings.outro||0,this.staticDur=this.attrs.timings.static??1e3}}function C(t){return t>i.dataColors.length-1?i.dataColors[Math.floor(Math.random()*Math.floor(i.dataColors.length))]:i.dataColors[t]}class S extends t.HTMLClip{get html(){return this.data=this.attrs.data.data,`<div class="container-pieChart">\n        <h1 class="title">${this.buildTitle().join("")}</h1>\n        <div class="columns">\n          <div class="col-1">\n            <div class="piechart"></div>\n          </div>\n          <div class="col-2">\n            <div class="legend">${this.buildLegend().join("")}</div>\n          </div>\n        </div>\n      </div>`}get css(){var t,e,n;const a={data:this.attrs.data,palette:this.attrs.palette||{},font:this.attrs.font||{},radiusString:this.createRadiusString()},s={".container-pieChart":{opacity:1,"background-color":"transparent",width:"100%",height:"100%",display:"flex","align-items":"center","flex-direction":"column","font-family":`${(null===(t=a.font)||void 0===t?void 0:t.fontFamily)||"Staatliches, cursive"}`,"font-size":`${(null===(e=a.font)||void 0===e?void 0:e.size)||"1.6rem"}`,color:a.palette.font||i.font},".title":{top:"-1rem",position:"relative",display:"flex","justify-content":"center","align-items":"center","flex:direction":"row",overflow:"hidden"},".columns":{width:"100%",height:"100%",display:"flex"},".col-1":{width:"65%",height:"100%",display:"flex","justify-content":"center","align-items":"center"},".col-2":{width:"35%",height:"100%",display:"flex","justify-content":"center","align-items":"center"},".piechart":{display:"block",width:"95%",height:"95%","border-radius":"50%","background-image":`conic-gradient(${a.radiusString})`,"margin-left":"2rem"},".legend":{display:"flex","flex-direction":"column",padding:"1rem","max-width":"75%","min-width":"50%",background:a.palette.primary||"rgba(0,0,0, 0.2)",position:"relative",top:"22.5%",overflow:"hidden"},".legend-row":{display:"flex","flex-direction":"row","align-items":"center","align-self":"flex-start"},".legend-text":{" white-space":"nowrap"},".space":{"min-width":null!==(n=a.font)&&void 0!==n&&n.size?`calc(${a.font.size} * 0.5)`:"0.8rem"},".char":{position:"relative"}};return a.data.data.forEach(((t,i)=>{s[".meter-"+i]={background:t.color||C(i),width:"1rem",height:"1rem",display:"block","margin-right":"0.5rem","margin-bottom":"0.25rem"}})),o(s)}get fonts(){var t;return[{type:"google-font",src:(null===(t=this.attrs.font)||void 0===t?void 0:t.url)||"https://fonts.googleapis.com/css2?family=Staatliches&display=swap"}]}buildTree(){var i;if(n(this,".container-pieChart"),this.static=this.attrs.timings.static??1e3,this.intro=this.attrs.timings.intro||0,this.outro=this.attrs.timings.outro||0,this.intro){const i=Math.round(.8*this.intro),e=Math.round(.4*this.intro);this.attrs.data.title&&[...this.attrs.data.title].forEach(((i,n)=>{const a=new t.CSSEffect({animatedAttrs:{right:"0%",opacity:1},initialValues:{right:"-102%",opacity:0,position:"relative"}},{duration:Math.round(e/this.attrs.data.title.length),selector:`.char-${n}`,easing:"easeOutCubic"});this.addIncident(a,Math.round(e/this.attrs.data.title.length)*n)}));const n=new t.CSSEffect({animatedAttrs:{"background-image":`conic-gradient(${this.createRadiusString()})`},initialValues:{"background-image":`conic-gradient(${this.createNullRadiusString()})`}},{duration:i,selector:".piechart",easing:"easeInOutCubic"});this.addIncident(n,e-.2*this.intro);const a=new t.CSSEffect({animatedAttrs:{width:"75%","min-width":"50%",opacity:1},initialValues:{width:"0%","min-width":"0%",opacity:0}},{duration:i,selector:".legend",easing:"easeInOutCubic"});this.addIncident(a,e-.2*this.intro)}const e=new t.CSSEffect({animatedAttrs:{}},{duration:this.static,selector:".container-pieChart"});if(this.addIncident(e,this.intro),null!==(i=this.attrs.timings)&&void 0!==i&&i.outro){var a;const i=Math.round(null===(a=this.attrs.timings)||void 0===a?void 0:a.outro),e=new t.CSSEffect({animatedAttrs:{top:"-10%"},initialValues:{top:"0%"}},{duration:.5*i,selector:".title",easing:"easeInQuart"});this.addIncident(e,this.intro+this.static+.2*this.outro);const n=new t.CSSEffect({animatedAttrs:{width:"0%","min-width":"0%",opacity:0}},{duration:i,selector:".legend",easing:"easeInOutCirc"});this.addIncident(n,this.intro+this.static);const s=new t.CSSEffect({animatedAttrs:{"background-image":`conic-gradient(${this.createNullRadiusString()})`},initialValues:{"background-image":`conic-gradient(${this.createRadiusString()})`}},{duration:i,selector:".piechart",easing:"easeInOutCubic"});this.addIncident(s,this.intro+this.static)}}createRadiusString(){let t="",i=0;for(const e in this.data)t+="0"===e?`\n                    ${this.data[e].color||C(e)}\n                    ${this.data[e].value/100}turn,\n                `:`\n                    ${this.data[e-1].color||C(e)}\n                    ${this.data[e-1].value/100}turn,\n                    ${this.data[e].color||C(e)}\n                    ${i+this.data[e].value/100}turn,\n                `,i+=this.data[e].value/100;return t+"rgba(0,0,0,0) 0 360deg"}createNullRadiusString(){let t="";for(const i in this.data)t+="0"===i?`\n                    ${this.data[i].color||C(i)}\n                    0turn,\n                `:`\n                    ${this.data[i-1].color||C(i)}\n                    0turn,\n                    ${this.data[i].color||C(i)}\n                    0turn,\n                `;return t+"rgba(0,0,0,0) 0 360deg"}buildTitle(){return(this.data.title||[]).map(((t,i)=>`<div class="char">\n          <div class="char-${i} ${" "===t?" space":""}">\n            ${t}\n          </div>\n        </div>`))}buildLegend(){return this.data.map(((t,i)=>(t.name.length>24&&(t.name=t.name.substring(0,21)+"..."),`<div class="legend-row">\n          <div class="meter-${i}"></div>\n          <div class="legend-text">${t.name}</div>\n        </div>`)))}}var $={ProgressBar:{data:{type:"array",items:{type:"any"}},timings:{type:"object",props:{intro:{type:"number",min:0,optional:!0},static:{type:"number",min:0,optional:!0},outro:{type:"number",min:0,optional:!0}}},pallete:{type:"object",optional:!0,props:{primary:{type:"color",optional:!0},secondary:{type:"color",optional:!0},font:{type:"color",optional:!0},accent:{type:"color",optional:!0},background:{type:"color",optional:!0}}},font:{type:"object",optional:!0,props:{url:{type:"string",optional:!0},fontFamily:{type:"string",optional:!0},size:{type:"measurement",optional:!0,min:0,units:["px","%","em","rem"]}}},options:{type:"object",optional:!0,props:{hidePercentage:{type:"boolean",optional:!0}}}},BarChartSimple:{data:{type:"object",props:{title:{type:"string",optional:!0},subtitle:{type:"string",optional:!0},showGrid:{type:"boolean",optional:!0},maxValue:{type:"number",min:0,optional:!0},data:{type:"array",items:{type:"any"}}}},timings:{type:"object",props:{intro:{type:"number",min:0,optional:!0},static:{type:"number",min:0,optional:!0},outro:{type:"number",min:0,optional:!0}}},pallete:{type:"object",optional:!0,props:{primary:{type:"color",optional:!0},secondary:{type:"color",optional:!0},tertiary:{type:"color",optional:!0},font:{type:"color",optional:!0},accent:{type:"color",optional:!0},background:{type:"color",optional:!0}}},font:{type:"object",optional:!0,props:{url:{type:"string",optional:!0},fontFamily:{type:"string",optional:!0},size:{type:"measurement",optional:!0,min:0,units:["px","%","em","rem"]}}}},LineGraph:{data:{type:"object",props:{title:{type:"string",optional:!0},showGrid:{type:"boolean",optional:!0},interval:{type:"number",min:0,optional:!0},maxValue:{type:"number",min:0,optional:!0},unit:{type:"string",optional:!0},hover:{type:"boolean",optional:!0},data:{type:"array",items:{type:"any"}},dataSets:{type:"array",items:{type:"any"}}}},timings:{type:"object",props:{intro:{type:"number",min:0,optional:!0},static:{type:"number",min:0,optional:!0},outro:{type:"number",min:0,optional:!0}}},pallete:{type:"object",optional:!0,props:{primary:{type:"color",optional:!0},secondary:{type:"color",optional:!0},tertiary:{type:"color",optional:!0},quaternary:{type:"color",optional:!0},font:{type:"color",optional:!0},accent:{type:"color",optional:!0},background:{type:"color",optional:!0}}},font:{type:"object",optional:!0,props:{url:{type:"string",optional:!0},fontFamily:{type:"string",optional:!0},size:{type:"measurement",optional:!0,min:0,units:["px","%","em","rem"]}}},hover:{type:"boolean",optional:!0},legend:{type:"boolean",optional:!0},trace:{type:"object",optional:!0,props:{toggle:{type:"boolean",optional:!0},scale:{type:"number",optional:!0}}}},PieChart:{data:{type:"object",props:{title:{type:"string",optional:!0},data:{type:"array",items:{type:"any"}}}},timings:{type:"object",props:{intro:{type:"number",min:0,optional:!0},static:{type:"number",min:0,optional:!0},outro:{type:"number",min:0,optional:!0}}},pallete:{type:"object",optional:!0,props:{font:{type:"color",optional:!0},background:{type:"color",optional:!0}}},font:{type:"object",optional:!0,props:{url:{type:"string",optional:!0},fontFamily:{type:"string",optional:!0},size:{type:"measurement",optional:!0,min:0,units:["px","%","em","rem"]}}}}};return{npm_name:"@donkeyclip/motorcortex-graphs",version:"2.2.1",incidents:[{exportable:d,name:"ProgressBar",attributesValidationRules:$.ProgressBar,originalDims:{width:"1200px",height:"900px"}},{exportable:r,name:"BarChartSimple",attributesValidationRules:$.BarChartSimple},{exportable:v,name:"LineGraph",attributesValidationRules:$.LineGraph},{exportable:S,name:"PieChart",attributesValidationRules:$.PieChart,originalDims:{width:"1200px",height:"900px"}}]}}));
