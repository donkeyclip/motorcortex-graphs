!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i(require("@donkeyclip/motorcortex")):"function"==typeof define&&define.amd?define(["@donkeyclip/motorcortex"],i):(t="undefined"!=typeof globalThis?globalThis:t||self)["@donkeyclip/motorcortex-graphs"]=i(t.MotorCortex)}(this,(function(t){"use strict";function i(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n=i(t);const a={gray:"#75706E",lightGray:"#B2B1AE",darkGray:"#434243",whiteBack:"#EEEEEE",font:"#100300",accent:"#FFD800",background:"transparent",dataColors:["rgb(117,112,110)","rgb(255,216,0)","rgb(87,86,87)","rgb(163, 255, 200)","rgb(255,255,255)","rgb(206, 36, 132)","rgb(68, 214, 37)","rgb(228, 31, 31)","rgb(68, 36, 157)","rgb(45, 109, 121)"]};function e(i,n){i.addIncident(new t.CSSEffect({animatedAttrs:{opacity:1},initialValues:{opacity:0}},{selector:n,duration:1}),0),i.addIncident(new t.CSSEffect({animatedAttrs:{opacity:0}},{selector:n,duration:1}),i.introDur+i.staticDur+i.outroDur-1)}function s(i,n){i.addIncident(new t.CSSEffect({animatedAttrs:{opacity:1},initialValues:{opacity:0}},{selector:n,duration:1}),0),i.attrs.timings.outro||i.addIncident(new t.CSSEffect({animatedAttrs:{opacity:0}},{selector:n,duration:1}),i.attrs.timings.intro+i.attrs.timings.static-1)}const o=/^[+-]?(\d+([.]\d*)?|[.]\d+)/gi;var r=t=>{const i=t.match(o)[0],n=t.substring(i.length);if("number"==typeof(a=Number(i))&&isFinite(a)&&("%"!==n||"px"!==n))return{number:Number(i),unit:n};var a};function c(t){return Object.entries(t).map((t=>{let[i,n]=t;return"".concat(i,"{").concat(Object.entries(n).map((t=>{let[i,n]=t;return"".concat(i,":").concat(n)})).join(";"),"}")})).join("")}class l extends t.HTMLClip{get html(){this.buildVars();const t=[];for(const i in this.title){const n=" "===this.title[i]?'<div class="space-char letter-wrapper">-</div>':'<div class="fontColorOn letter-wrapper">'.concat(this.title[i],"</div>");t.push('<div id="letter-'.concat(i,'" class="letter-container">').concat(n,"</div>"))}const i=[];for(const t in this.subtitle){const n=" "===this.subtitle[t]?'<div class="space-char letter-wrapper">-</div>':'<div className="fontColorOn letter-wrapper">'.concat(this.subtitle[t],"</div>");i.push('<div id="letter-'.concat(t,'" class="letter-container">').concat(n,"</div>"))}const n=[];for(let t=0;t<this.gridLinesNum;t++)n.push('<div class="gridLine" id="gridLine'.concat(t,'"></div>'));const a=[],e=[];for(const t in this.data){const i=this.data[t];i.name.length>4&&(i.name=i.name.slice(0,4),this.data[t]=i),a.push('<div class="label-container" id="label-'.concat(t,'">').concat(this.data[t].name,"</div>")),this.maxPoint<i.value&&(this.maxPoint=i.value),e.push('<div class="'.concat(i.name,"-bar-").concat(t,'">\n          <div\n            class="bar-fill"\n            style="background:').concat(i.color?i.color:this.primaryC,'"\n            id="').concat(i.name,'-bar-fill"\n          ></div>\n        </div>'))}return this.maxPoint=this.attrs.data.maxValue?this.attrs.data.maxValue:this.maxPoint,'<div class="container-barChart">\n        <div class="title-container">\n          <div class="title-wrapper">'.concat(t.join(""),'</div>\n          <div class="subtitle-position-end">\n            <div class="subtitle-wrapper">').concat(i.join(""),'</div>\n          </div>\n          <div class="title-back-wrapper">\n            <div class="title-back-animHelper">\n              <div class="title-background block-background"></div>\n            </div>\n          </div>\n        </div>\n        <div class="graph-container">\n          <div class="graph">').concat(e.join(""),'</div>\n          <div class="gridlines">').concat(n.join(""),'</div>\n        </div>\n        <div class="y-axis"></div>\n        <div class="x-axis"></div>\n        <div class="x-labels-container">').concat(a.join(""),'</div>\n        <div class="x-labels-back-wrapper">\n          <div class="x-labels-background block-background"></div>\n        </div>\n      </div>')}get css(){return function(t){const i={".y-axis":{width:"4px",height:"70%",left:"14%",top:"15%",background:t.tertiaryC,position:"absolute"},".x-axis":{width:"74%",height:"4px",top:"85%",left:"14%",background:t.tertiaryC,position:"absolute"},".gridlines":{width:"100%",height:"calc(100% + 3px)",display:"flex","flex-direction":"column","justify-content":"space-between"},".gridLine":{height:"3px",width:"100%",background:t.secondaryC,"align-self":"flex-end"},".graph":{top:0,left:0,position:"absolute",width:"100%",height:"100%",display:"flex","justify-content":"space-around",overflow:"hidden"},".bar-container":{"align-self":"flex-end",width:"".concat(100/t.data.length,"%"),margin:"0% ".concat(10/t.data.length+1,"%"),height:"100%",display:"flex"},".bar-fill":{width:"100%",height:"100%",background:t.primaryC,"align-self":"center"},".block-background":{width:"100%",height:"100%",background:t.accentC,position:"relative"},".title-back-animHelper":{width:"100%",height:"100%",display:"flex","flex-direction":"row-reverse"},".title-back-wrapper":{width:"100%",height:"100%",display:"flex",position:"absolute","flex-direction":"row","z-index":"-1"},".x-labels-back-wrapper":{width:"70%",height:"5%",top:"87%",left:"16%",position:"absolute",display:"flex","flex-direction":"row-reverse"},".x-labels-container":{"font-family":t.fontFamily,background:"transparent",width:"70%",height:"5%",top:"87%",left:"16%",position:"absolute",display:"flex","align-items":"center","z-index":"1","justify-content":"space-around"},".letter-wrapper":{"font-size":t.fontSize,display:"flex","flex-direction":"column",position:"relative"},".letter-container":{overflow:"hidden",position:"relative"},".title-container":{"font-family":t.fontFamily,background:"transparent",width:"70%",height:"fit-content","min-height":"5%","max-height":"7%",top:"7%",left:"16%",position:"absolute",display:"flex","z-index":"1","justify-content":"space-around"},".title-wrapper":{display:"flex","flex-grow":"2","flex-wrap":"wrap","align-items":"center",overflow:"hidden","padding-left":"6px","z-index":"1"},".subtitle-wrapper":{display:"flex","z-index":"1","flex-wrap":"wrap","align-items":"center"},".subtitle-position-end":{display:"flex","flex-grow":"1","padding-right":"6px","flex-wrap":"wrap","max-width":"34%",overflow:"hidden","justify-content":"flex-end"},".label-container":{position:"relative",top:"1px",display:"flex","flex-direction":"row",overflow:"hidden"},".container-barChart":{width:"100%",height:"100%",background:t.backgroundC,display:"flex"},".graph-container":{left:"16%",top:"17%",width:"70%",height:"63%",position:"absolute"},".fontColorOn":{color:t.fontC},".space-char":{visibility:"hidden"},".accent-background":{width:"100%",height:"100%",background:t.accentC,position:"relative"}};return t.data.map(((n,a)=>{i[".".concat(n.name,"-bar-").concat(a)]={"align-self":"flex-end",width:"".concat(100/t.data.length,"%"),margin:"0% ".concat(10/t.data.length+1,"%"),height:"100%",display:"flex"},i[".".concat(n.name,"-bar-").concat(a)].height="\n            ".concat(n.value.toFixed(2)/t.maxPoint*100,"%"),i[".".concat(n.name,"-bar-fill")]={height:"100%"}})),c(i)}(this)}get fonts(){return[{type:"google-font",src:"".concat(this.url)}]}buildTree(){if(e(this,".container-barChart"),this.attrs.timings.intro){const i=.75*this.introDur,n=new t.Group,a=new t.Combo({incidents:[{incidentClass:t.CSSEffect,attrs:{animatedAttrs:{height:"70%"},initialValues:{height:"0%"}},props:{selector:".y-axis",duration:Math.trunc(.2*this.introDur),easing:"easeInQuad"},position:Math.trunc(0*this.introDur)},{incidentClass:t.CSSEffect,attrs:{animatedAttrs:{width:"74%"},initialValues:{width:"0%"}},props:{selector:".x-axis",duration:Math.trunc(.3*this.introDur),easing:"easeOutQuad"},position:Math.trunc(.2*this.introDur)}]},{selector:".container-barChart"});n.addIncident(a,0*this.introDur);const e=new t.CSSEffect({animatedAttrs:{width:"100%"},initialValues:{width:"0%"}},{selector:".gridLine",duration:Math.trunc(.5*this.introDur),easing:"easeOutQuad"});n.addIncident(e,Math.trunc(.2*this.introDur));const s=new t.Group;s.addIncident(new t.CSSEffect({animatedAttrs:{width:"100%"},initialValues:{width:"0%"}},{selector:".title-background",duration:Math.trunc(.25*this.introDur),easing:"easeInOutQuad"}),0);const o=2*(.7*this.introDur)/(this.title.length+1),r=[];for(const i in this.title)r.push({incidentClass:t.CSSEffect,attrs:{animatedAttrs:{left:"0px",opacity:1},initialValues:{left:"20px",opacity:0}},props:{selector:"#letter-".concat(i),duration:Math.trunc(o),easing:"easeOutQuart"},position:Math.trunc(o*i/2)});const c=new t.Combo({incidents:r},{selector:".title-wrapper"});s.addIncident(c,Math.trunc(.25*this.introDur));const l=2*(.8*this.introDur)/(this.subtitle.length+1),h=[];for(const i in this.subtitle)h.push({incidentClass:t.CSSEffect,attrs:{animatedAttrs:{left:"0px",opacity:1},initialValues:{left:"20px",opacity:0}},props:{selector:"#letter-".concat(i),duration:Math.trunc(l),easing:"easeOutQuart"},position:Math.trunc(l*i/2)});const d=new t.Combo({incidents:h},{selector:".subtitle-wrapper"});s.addIncident(d,Math.trunc(.1*this.introDur)),n.addIncident(s,Math.trunc(.05*this.introDur));const u=new t.Group;u.addIncident(new t.CSSEffect({animatedAttrs:{width:"70%"},initialValues:{width:"0%"}},{selector:".x-labels-back-wrapper",duration:Math.trunc(.25*this.introDur),easing:"easeInOutCubic"}),0);const p=2*i/(this.data.length+1);for(const n in this.data){const a=2*p/(this.data[n].name.length+1),e=[];for(const i in this.data[n].name)e.push({incidentClass:t.CSSEffect,attrs:{animatedAttrs:{top:"0px",opacity:1},initialValues:{top:"-30px",opacity:0}},props:{selector:"#letter-".concat(n,"-").concat(i),duration:Math.trunc(a),easing:"easeOutQuart"},position:Math.trunc(a*i/2)});const s=new t.Combo({incidents:e},{selector:".label-container"});u.addIncident(s,Math.trunc(i/(this.data.length+1)*n))}n.addIncident(u,Math.trunc(.05*this.introDur));const g=new t.Combo({incidents:[{incidentClass:t.CSSEffect,attrs:{animatedAttrs:{height:"100%"},initialValues:{height:"0%"}},props:{duration:Math.trunc(.3*this.introDur),easing:"easeInOutQuad"},position:0}]},{selector:".bar-fill",delay:"@stagger(0, ".concat(Math.trunc(.4*this.introDur),")")});n.addIncident(g,Math.trunc(.3*this.introDur)),this.addIncident(n,0*this.introDur)}if(this.attrs.timings.outro){const i=.75*this.outroDur,n=new t.Group,a=new t.Combo({incidents:[{incidentClass:t.CSSEffect,attrs:{animatedAttrs:{width:"0%"},initialValues:{width:"74%"}},props:{selector:".x-axis",duration:Math.trunc(.2*this.outroDur),easing:"easeInQuad"},position:0*this.outroDur},{incidentClass:t.CSSEffect,attrs:{animatedAttrs:{height:"0%"},initialValues:{height:"70%"}},props:{selector:".y-axis",duration:Math.trunc(.3*this.outroDur),easing:"easeOutQuad"},position:Math.trunc(.2*this.outroDur)}]},{selector:".container-barChart"});n.addIncident(a,Math.trunc(.5*this.outroDur));const e=new t.CSSEffect({animatedAttrs:{width:"0%"},initialValues:{width:"100%"}},{selector:".gridlines",easing:"easeInOutQuad",duration:Math.trunc(.5*this.outroDur)});n.addIncident(e,Math.trunc(.2*this.outroDur));const s=new t.Group;s.addIncident(new t.CSSEffect({animatedAttrs:{width:"0%"},initialValues:{width:"100%"}},{selector:".title-back-animHelper",duration:Math.trunc(.45*this.outroDur),easing:"easeInOutQuad"}),Math.trunc(.3*this.outroDur));const o=2*(.8*this.outroDur)/(this.title.length+1),r=[];for(const i in this.title)r.push({incidentClass:t.CSSEffect,attrs:{animatedAttrs:{left:"20px",opacity:0},initialValues:{left:"0px",opacity:1}},props:{selector:"#letter-".concat(i),duration:Math.trunc(o),easing:"easeOutQuart"},position:Math.trunc(o*(this.title.length-i-1)/2)});const c=new t.Combo({incidents:r},{selector:".title-wrapper"});s.addIncident(c,Math.trunc(.1*this.outroDur));const l=2*(.4*this.outroDur)/(this.subtitle.length+1),h=[];for(const i in this.subtitle)h.push({incidentClass:t.CSSEffect,attrs:{animatedAttrs:{left:"20px",opacity:0},initialValues:{left:"0px",opacity:1}},props:{selector:"#letter-".concat(i),duration:Math.trunc(l),easing:"easeOutQuart"},position:Math.trunc(l*(this.subtitle.length-i-1)/2)});const d=new t.Combo({incidents:h},{selector:".subtitle-wrapper"});s.addIncident(d,Math.trunc(0*this.outroDur)),n.addIncident(s,Math.trunc(.05*this.outroDur));const u=new t.Group;u.addIncident(new t.CSSEffect({animatedAttrs:{width:"0%"},initialValues:{width:"100%"}},{selector:".x-labels-background",duration:Math.trunc(.45*this.outroDur),easing:"easeInOutCubic"}),.3*this.outroDur);const p=2*i/(this.data.length+1);for(const n in this.data){const a=2*p/(this.data[n].name.length+1),e=[];for(const i in this.data[n].name)e.push({incidentClass:t.CSSEffect,attrs:{animatedAttrs:{opacity:0,top:"-30px"},initialValues:{opacity:1,top:"0px"}},props:{selector:"#letter-".concat(n,"-").concat(i),duration:Math.trunc(a),easing:"easeInQuart"},position:Math.trunc(a*i/2)});const s=new t.Combo({incidents:e},{selector:".label-container"});u.addIncident(s,Math.trunc(i/(this.data.length+1)*n))}n.addIncident(u,Math.trunc(.05*this.outroDur));const g=[];for(const i in this.data)g.push({incidentClass:t.CSSEffect,attrs:{animatedAttrs:{height:"0%"},initialValues:{height:"100%"}},props:{duration:Math.trunc(.3*this.outroDur),easing:"easeInOutCubic",selector:"#".concat(this.data[i].name,"-bar-fill")},position:Math.trunc(l*(this.data.length-i-1)/2)});const m=new t.Combo({incidents:g},{selector:".graph"});n.addIncident(m,0*this.outroDur),this.addIncident(n,0+this.introDur+this.staticDur)}const i=new t.CSSEffect({animatedAttrs:{}},{selector:".container-barChart",duration:this.staticDur});this.addIncident(i,this.introDur)}buildVars(){var t;this.data=this.attrs.data.data,this.title=this.attrs.data.title,this.subtitle=this.attrs.data.subtitle,this.maxPoint=0,this.gridLinesNum=this.attrs.data.showGrid?11:0,this.attrs.palette=this.attrs.palette||{},this.primaryC=this.attrs.palette.primary||a.gray,this.secondaryC=this.attrs.palette.secondary||a.lightGray,this.tertiaryC=this.attrs.palette.tertiary||a.darkGray,this.fontC=this.attrs.palette.font||a.font,this.accentC=this.attrs.palette.accent||a.accent,this.backgroundC=this.attrs.palette.background||a.background,this.attrs.font=this.attrs.font||{},this.fontFamily=this.attrs.font.fontFamily||"'Staatliches', cursive",this.fontSize=this.attrs.font.size||"1.7rem",this.url=this.attrs.font.url||"https://fonts.googleapis.com/css2?family=Staatliches&display=swap",this.attrs.timings=this.attrs.timings||{},this.introDur=this.attrs.timings.intro||0,this.outroDur=this.attrs.timings.outro||0,this.staticDur=null!==(t=this.attrs.timings.static)&&void 0!==t?t:1e3}}class h extends n.default.Effect{getScratchValue(){return 0}onGetContext(){this.element.innerHTML=this.initialValue}onProgress(t){let i=this.initialValue+(this.targetValue-this.initialValue)*this.getFraction(t);i=this.attrs.decimals?i.toFixed(this.attrs.decimals):Math.trunc(i),this.element.innerHTML=i}}var d={npm_name:"@donkeyclip/motorcortex-counter",version:"2.1.1",incidents:[{exportable:h,name:"Counter",attributesValidationRules:{animatedAttrs:{type:"object",props:{count:{type:"number"}}},decimals:{type:"number",optional:!0,min:0,max:20,integer:!0}}}]};const u=t.loadPlugin(d);class p extends t.HTMLClip{get html(){const t=this.attrs.data.map(((t,i)=>{var n;return'<div class="row row-'.concat(i,'">\n          <div class="bar-header">').concat(t.name,'</div>\n          <div class="container-bar container-bar-').concat(i,'">\n            <div\n              class="inner-bar inner-bar-').concat(i," ").concat(t.value<this.criticalValue?"extra-trunced-"+i:"",'"\n            ></div>\n          </div>\n          <div class="text indicator-').concat(i,'">').concat(t.value,'</div>\n          <div class="text text-unit">\n            ').concat(null!==(n=this.attrs.options)&&void 0!==n&&n.hidePercentage?"":"%","\n          </div>\n        </div>")}));return'<div class="container-progressBar">'.concat(t.join(""),"</div>")}get css(){const t={barSum:this.barSum,barCount:this.barCount,data:this.attrs.data,palette:this.attrs.palette?this.attrs.palette:{},font:this.attrs.font?this.attrs.font:{},options:this.attrs.options?this.attrs.options:{}},i={".container-progressBar":{height:"100%",background:t.palette.background||a.background,display:"flex",color:t.palette.font||a.font,"font-family":t.font.fontFamily||"'Staatliches', cursive"},".row":{display:"flex","flex-direction":"row",position:"absolute",left:"20%","align-items":"center",height:"".concat(60/t.barCount,"%"),width:"100%"},".container-bar":{position:"absolute",height:"100%",background:t.palette.secondary?t.palette.secondary:a.darkGray,"border-radius":"4rem",width:"60%","box-shadow":"2px 2px 5px gray",border:"0.2rem solid ".concat(t.palette.accent||a.accent),"z-index":"1",overflow:"hidden"},".inner-bar":{position:"relative",background:t.palette.primary||a.lightGray,height:"102%","border-radius":"4rem",bottom:"-1px","z-index":"2px",top:"-0.5px"},".text":{position:"relative","z-index":"0",opacity:"1",left:"62%","font-size":t.font.size||"1.2rem"},".bar-header":{position:"absolute",left:"-21%","text-align":"right",width:"20%","font-size":t.font.size||"1.2rem"}},n=t.barSum/t.barCount;return t.data.forEach(((a,e)=>{i[".row-".concat(e)]={bottom:"".concat(50+100*(n-e)/t.barCount-60/t.barCount*2.15,"%")},i[".inner-bar-".concat(e)]={width:"".concat(a.value.toFixed(2),"%")}})),c(i)}get fonts(){var t;return[{type:"google-font",src:(null===(t=this.attrs.font)||void 0===t?void 0:t.url)||"https://fonts.googleapis.com/css2?family=Staatliches&display=swap"}]}buildTree(){var i,n;this.static=null!==(i=this.attrs.timings.static)&&void 0!==i?i:1e3,this.intro=this.attrs.timings.intro||0,this.outro=this.attrs.timings.outro||0;const a=this.barSum/this.barCount;if(s(this,".container-progressBar"),null!==(n=this.attrs.timings)&&void 0!==n&&n.intro){const i=Math.floor(.33*this.intro),n=Math.floor(.25*this.intro),e=Math.floor(.33*this.intro);for(let s=0;s<this.barCount;s++){const o=new t.CSSEffect({animatedAttrs:{bottom:"".concat(50+100*(a-s)/this.barCount-60/this.barCount*2.15,"%"),opacity:1},initialValues:{bottom:"-".concat(65/this.barCount,"%"),opacity:0}},{duration:i,selector:".row-".concat(s),easing:"easeInOutQuad"}),r=new t.CSSEffect({animatedAttrs:{width:"60%"},initialValues:{width:"0.2%"}},{duration:n,selector:".container-bar-".concat(s),easing:"easeInOutQuad"}),c=new t.CSSEffect({animatedAttrs:{width:"".concat(this.attrs.data[s].value.toFixed(2),"%")},initialValues:{width:"0%"}},{duration:e,selector:".inner-bar-".concat(s),easing:"easeInOutQuad"}),l=new u.Counter({animatedAttrs:{count:this.attrs.data[s].value},initialValues:{count:0}},{easing:"easeInOutQuad",selector:".indicator-".concat(s),duration:e});this.addIncident(o,0),this.addIncident(r,i),this.addIncident(c,i+n),this.addIncident(l,i+n)}const s=new t.CSSEffect({animatedAttrs:{left:"62%",opacity:1},initialValues:{left:"0%",opacity:0}},{duration:e,selector:".text",easing:"easeInOutQuad"});this.addIncident(s,i)}const e=new t.CSSEffect({animatedAttrs:{}},{duration:this.static,selector:".container-progressBar"});if(this.addIncident(e,this.intro),this.outro){const i=this.intro+this.static+this.outro,n=Math.floor(.33*this.outro),e=Math.floor(.25*this.outro),s=Math.floor(.33*this.outro);for(let o=0;o<this.barCount;o++){const r=new t.CSSEffect({animatedAttrs:{bottom:"-".concat(65/this.barCount,"%"),opacity:0},initialValues:{bottom:"".concat(50+100*(a-o)/this.barCount-60/this.barCount*2.15,"%"),opacity:1}},{duration:n,selector:".row-".concat(o),easing:"easeInOutQuad"}),c=new t.CSSEffect({animatedAttrs:{width:"0.2%"},initialValues:{width:"60%"}},{duration:e,selector:".container-bar-".concat(o),easing:"easeInOutQuad"}),l=new t.CSSEffect({animatedAttrs:{width:"0%"},initialValues:{width:"".concat(this.attrs.data[o].value.toFixed(2),"%")}},{duration:s,selector:".inner-bar-".concat(o),easing:"easeInOutQuad"}),h=new u.Counter({animatedAttrs:{count:0},initialValues:{count:this.attrs.data[o].value}},{easing:"easeInOutQuad",selector:".indicator-".concat(o),duration:s});this.addIncident(r,i-n),this.addIncident(c,i-n-e),this.addIncident(l,i-n-e-s),this.addIncident(h,i-n-e-s)}const o=new t.CSSEffect({animatedAttrs:{left:"0%",opacity:0},initialValues:{left:"62%",opacity:1}},{duration:s,selector:".text",easing:"easeInOutQuad"});this.addIncident(o,i-n-1.1*e)}}get barSum(){let t=0;for(let i=1;i<=this.barCount;i++)t+=i;return t}get barCount(){return this.attrs.data.length}get criticalValue(){const t=this.barCount/10;return 1===t?10*t:t>1?10*(t-1):10*(t+1)}}var g={lineGraph:{originalDims:{width:1200,height:900}}};class m extends t.Effect{getScratchValue(){return this.pathLength=Math.ceil(this.element.getTotalLength()),this.element.style.strokeDasharray="".concat(this.pathLength," ").concat(this.pathLength),this.element.style.strokeDashoffset=this.pathLength,0}onGetContext(){this.pathLength=Math.ceil(this.element.getTotalLength())}onProgress(t){const i=(this.targetValue-this.initialValue)*this.getFraction(t)+this.initialValue;this.element.style.strokeDashoffset=Math.ceil(this.pathLength*(1-i))}}var f={npm_name:"@donkeyclip/motorcortex-svgdraw",version:"1.2.0",incidents:[{exportable:m,name:"Draw",attributesValidationRules:{animatedAttrs:{type:"object",props:{cover:{type:"number",min:0,max:1}}}}}]};class b{constructor(t){this.el=t,this.matrix=this.getMatrix(t),this.viewportCenter=this.getViewPortCenter(),this.idlePosition=this.getIdlePosition()}getMatrix(t){return function(t){const i=window.getComputedStyle(t).transform;return""===i||"none"===i?{rotate:"0deg",scaleX:1,scaleY:1,skewX:"0deg",skewY:"0deg",translateX:"0px",translateY:"0px"}:function(t){const i=Math.atan2(t[1],t[0]),n=Math.pow(t[0],2)+Math.pow(t[1],2),a=Math.pow(t[2],2)+Math.pow(t[3],2),e=Math.sqrt(n),s=(t[0]*t[3]-t[2]*t[1])/e,o=Math.atan2(t[0]*t[2]+t[1]*t[3],n),r=Math.atan2(t[1]*t[3]+t[0]*t[2],a);return{rotate:i/(Math.PI/180)+"deg",scaleX:e,scaleY:s,skewX:(1===n?o/(Math.PI/180):0)+"deg",skewY:(1===a?r/(Math.PI/180):0)+"deg",translateX:t[4]+"px",translateY:t[5]+"px"}}(i.split("(")[1].split(")")[0].split(","))}(t)}getViewPortCenter(){const t=this.el.parentNode;return{x:parseFloat(getComputedStyle(t,null).width.replace("px",""))/2,y:parseFloat(getComputedStyle(t,null).height.replace("px",""))/2}}getIdlePosition(){const t=this.el,i=t.getBoundingClientRect(),n=t.parentNode.getBoundingClientRect();return{x:i.left-n.left,y:i.top-n.top}}calcXYZoom(){const t=this.matrix,i=this.idlePosition,n=this.viewportCenter,a=n.x-i.x,e=n.y-i.y;return{...{x:a/t.scaleX,y:e/t.scaleY},zoom:t.scaleX}}createProgressFunction(t){const i=this._xyzoomToTranslate(t.start),n=this._xyzoomToTranslate(t.target),a=Math.atan(Math.abs(n.y-i.y)/Math.abs(n.x-i.x)),e=Math.sqrt(Math.pow(n.y-i.y,2)+Math.pow(n.x-i.x,2));let s=1,o=1;return n.x<i.x&&(s=-1),n.y<i.y&&(o=-1),function(t){const r=t*e;return{translateX:s*r*Math.cos(a)+i.x,translateY:o*r*Math.sin(a)+i.y,scale:(n.scale-i.scale)*t+i.scale}}}_xyzoomToTranslate(t){const i=t.zoom*t.x,n=t.zoom*t.y,a=this.viewportCenter.x-i,e=this.viewportCenter.y-n;return{x:a-this.idlePosition.x,y:e-this.idlePosition.y,scale:t.zoom}}createPathProgressFunction(t,i){let n=t=>{};t.transitionDuration>0&&(n=this.createProgressFunction({start:i,target:{x:t.startPoint.x,y:t.startPoint.y,zoom:i.zoom}}));const a=t.transitionDuration/(t.transitionDuration+t.alongPathDuration),e=t.alongPathDuration/(t.transitionDuration+t.alongPathDuration),s=(t.endTo-t.startFrom)*t.pathLength;return o=>{if(t.transitionDuration>0&&o<a)return n(o/a);const r=(o-a)/e,c=(t.zoom-i.zoom)*r+i.zoom,l=r*s+t.startFrom*t.pathLength,h=t.path.getPointAtLength(l),d=this._xyzoomToTranslate({x:h.x,y:h.y,zoom:c});return{translateX:d.x,translateY:d.y,scale:d.scale}}}}class y extends n.default.Effect{getScratchValue(){return this.adaptor=new b(this.element),this.adaptor.calcXYZoom()}onGetContext(){this.adaptor=new b(this.element),this.progressMethod=this.adaptor.createProgressFunction({start:this.initialValue,target:this.targetValue})}onProgress(t){const i=this.progressMethod(this.getFraction(t));this.element.style.transform="translateX(".concat(i.translateX,"px) translateY(").concat(i.translateY,"px) scaleX(").concat(i.scale,") scaleY(").concat(i.scale,")")}}var w={npm_name:"@donkeyclip/motorcortex-2dcam",version:"0.3.0",incidents:[{exportable:y,name:"ZoomTo",attributesValidationRules:{animatedAttrs:{type:"object",props:{position:{type:"object",props:{x:{type:"number",optional:!0,min:0},y:{type:"number",optional:!0,min:0},zoom:{type:"number",optional:!0,min:0}}}}}}},{exportable:class extends y{onInitialise(){const t=this.props.duration,i=document.createElementNS("http://www.w3.org/2000/svg","path");i.setAttributeNS(null,"d",this.targetValue.path),this.data={path:i,finalPoint:null,startPoint:null,zoom:this.targetValue.zoom,pathLength:i.getTotalLength(),startFrom:this.attrs.from?this.attrs.from:0,endTo:this.attrs.to?this.attrs.to:1,transitionDuration:this.attrs.transition?this.attrs.transition:0,get alongPathDuration(){return t-this.transitionDuration}},this.data.finalPoint=i.getPointAtLength(this.data.endTo*this.data.pathLength),this.data.startPoint=i.getPointAtLength(this.data.startFrom*this.data.pathLength),this.targetValue.x=this.data.finalPoint.x,this.targetValue.y=this.data.finalPoint.y}onGetContext(){this.adaptor=new b(this.element),this.data.zoom=this.targetValue.zoom,this.progressMethod=this.adaptor.createPathProgressFunction(this.data,this.initialValue)}},name:"FollowPath",attributesValidationRules:{animatedAttrs:{type:"object",props:{position:{type:"object",props:{path:{type:"string",optional:!1},zoom:{type:"number",optional:!0,min:0}}}}},transition:{type:"number",integer:!0,min:0,optional:!0},from:{type:"number",min:0,max:1,optional:!0},to:{type:"number",min:0,max:1,optional:!0}}}],compositeAttributes:{position:["x","y","zoom","path"]}};const x=t.loadPlugin(f),v=t.loadPlugin(w);class C{constructor(t){this.instance=t}buildStaticControl(){return new t.CSSEffect({animatedAttrs:{}},{selector:".container-lineGraph",duration:this.instance.staticDur})}buildBackgroundIntro(){return new t.CSSEffect({animatedAttrs:{height:"70%"},initialValues:{height:"0%"}},{selector:".graph-background",duration:Math.trunc(.2*this.instance.introDur),easing:"easeInOutQuart"})}buildBackgroundOutro(){return new t.CSSEffect({animatedAttrs:{height:"0%"},initialValues:{height:"70%"}},{selector:".graph-background",duration:Math.trunc(.2*this.instance.outroDur),easing:"easeInOutQuart"})}buildTitleIntroCombo(){const i=.13*this.instance.introDur,n=[];for(const a in this.instance.words)n.push({incidentClass:t.CSSEffect,attrs:{animatedAttrs:{top:"0px",opacity:1},initialValues:{top:"-50px",opacity:0}},props:{selector:"#word-".concat(a),duration:Math.trunc(i/this.instance.words.length),easing:"easeInOutQuart"},position:Math.trunc(i/this.instance.words.length*a)});return new t.Combo({incidents:n},{selector:".title-wrapper-lineGraph"})}buildTitleOutroCombo(){const i=.13*this.instance.outroDur,n=[];for(const a in this.instance.words)n.push({incidentClass:t.CSSEffect,attrs:{animatedAttrs:{top:"-50px",opacity:0},initialValues:{top:"0px",opacity:1}},props:{selector:"#word-".concat(a),duration:Math.trunc(i/this.instance.words.length),easing:"easeInOutQuart"},position:Math.trunc(i/this.instance.words.length*(this.instance.words.length-1-a))});return new t.Combo({incidents:n},{selector:".title-wrapper-lineGraph"})}buildIntroLegend(){const i=.25*this.instance.introDur,n=i/this.instance.dataSetsNum,a=1===this.instance.dataSetsNum?null:"@stagger(0, ".concat(i-n,")"),e=[{incidentClass:t.CSSEffect,attrs:{animatedAttrs:{height:"".concat(this.instance.legendHeight,"%")},initialValues:{height:"0%"}},props:{duration:Math.trunc(.2*this.instance.introDur),easing:"easeInOutQuart"},position:0},{incidentClass:t.CSSEffect,attrs:{animatedAttrs:{opacity:1},initialValues:{opacity:0}},props:{selector:".color-wrapper",duration:Math.trunc(.1*this.instance.introDur),delay:a,easing:"easeInOutQuad"},position:Math.trunc(.15*this.instance.introDur)},{incidentClass:t.CSSEffect,attrs:{animatedAttrs:{opacity:1},initialValues:{opacity:0}},props:{selector:".line-title",duration:Math.trunc(.1*this.instance.introDur),delay:a,easing:"easeInOutQuad"},position:Math.trunc(.15*this.instance.introDur)}];return new t.Combo({incidents:e},{selector:".legend-wrapper"})}buildOutroLegend(){const i=.25*this.instance.outroDur,n=i/this.instance.dataSetsNum,a=1===this.instance.dataSetsNum?null:"@stagger(0, ".concat(i-n,", 0, linear, linear, true)"),e=[{incidentClass:t.CSSEffect,attrs:{animatedAttrs:{height:"0%"},initialValues:{height:"".concat(this.instance.legendHeight,"%")}},props:{duration:Math.trunc(.2*this.instance.introDur),easing:"easeInOutQuart"},position:i},{incidentClass:t.CSSEffect,attrs:{animatedAttrs:{opacity:1},initialValues:{opacity:0}},props:{selector:".color-wrapper",duration:Math.trunc(.1*this.instance.introDur),delay:a,easing:"easeInOutQuad"},position:Math.trunc(i-.15*this.instance.introDur)},{incidentClass:t.CSSEffect,attrs:{animatedAttrs:{opacity:1},initialValues:{opacity:0}},props:{selector:".line-title",duration:Math.trunc(.1*this.instance.introDur),delay:a,easing:"easeInOutQuad"},position:Math.trunc(i-.15*this.instance.introDur)}];return new t.Combo({incidents:e},{selector:".legend-wrapper"})}buildIntroLabels(){const i=new t.Group;i.addIncident(new t.CSSEffect({animatedAttrs:{width:"100%"},initialValues:{width:"0%"}},{selector:".block-background",duration:Math.trunc(.25*this.instance.introDur),easing:"easeInOutQuart"}),0);const n=.2*this.instance.introDur,a=3*n/(this.instance.data.length+2);for(const e in this.instance.data){let s=a/2;const o=[];for(const i in this.instance.data[e].name)o.push({incidentClass:t.CSSEffect,attrs:{animatedAttrs:{opacity:1},initialValues:{opacity:0}},props:{selector:"#letter-".concat(e,"-").concat(i),duration:Math.trunc(.015*this.instance.introDur),easing:"easeInOutQuart"},position:Math.trunc(a-s)}),s/=2;const r=new t.Combo({incidents:o},{selector:".label-container"});i.addIncident(r,Math.trunc(.14*this.instance.introDur+n/(this.instance.data.length+1)*(this.instance.data.length-e-1)))}return i}buildOutroLabels(){const i=new t.Group,n=.55*this.instance.outroDur;i.addIncident(new t.CSSEffect({animatedAttrs:{width:"0%"},initialValues:{width:"100%"}},{selector:".block-background",duration:Math.trunc(.55*n),easing:"easeInOutQuart"}),0*n);const a=.2*this.instance.outroDur,e=3*a/(this.instance.data.length+2);for(const n in this.instance.data){let s=e/2;const o=[];for(const i in this.instance.data[n].name)o.push({incidentClass:t.CSSEffect,attrs:{animatedAttrs:{opacity:0},initialValues:{opacity:1}},props:{selector:"#letter-".concat(n,"-").concat(i),duration:Math.trunc(.015*this.instance.outroDur),easing:"easeInOutQuart"},position:Math.trunc(e-(e-s))}),s/=2;const r=new t.Combo({incidents:o},{selector:".label-container"});i.addIncident(r,Math.trunc(a*n/(this.instance.data.length+1)))}return i}buildIntroStele(){const i=new t.Group,n=5*(.3*this.instance.introDur)/(this.instance.data.length+1),a=n/5,e=3*n/(this.instance.steleBlockNum+1);if("steles"===this.instance.grid)for(const s in this.instance.data){const o=new t.Group({selector:"#stele-".concat(s)}),r=new t.Combo({incidents:[{incidentClass:t.CSSEffect,attrs:{animatedAttrs:{opacity:1},initialValues:{opacity:0}},props:{duration:Math.trunc(e)},position:0}]},{selector:".stele-block-".concat(s),delay:"@stagger(0, ".concat(Math.trunc(n-e),", 0, easeOutQuad)")});o.addIncident(r,0),i.addIncident(o,Math.trunc(s*a))}else if("lines"===this.instance.grid){const s=new t.Group({selector:"#stele-".concat(0)}),o=new t.Combo({incidents:[{incidentClass:t.CSSEffect,attrs:{animatedAttrs:{width:"100%"},initialValues:{width:"0%"}},props:{duration:Math.trunc(n),easing:"easeInOutQuad"},position:0}]},{selector:".stele-block-".concat(0),delay:"@stagger(0, ".concat(Math.trunc(n-e),", 0)")});s.addIncident(o,0),i.addIncident(s,Math.trunc(a))}return i}buildOutroStele(){const i=new t.Group,n=5*(.3*this.instance.outroDur)/(this.instance.data.length+1),a=n/5,e=3*n/(this.instance.steleBlockNum+1);if("steles"===this.instance.grid)for(const s in this.instance.data){const o=new t.Group({selector:"#stele-".concat(s)}),r=new t.Combo({incidents:[{incidentClass:t.CSSEffect,attrs:{animatedAttrs:{opacity:0},initialValues:{opacity:1}},props:{duration:Math.trunc(e)},position:0}]},{selector:".stele-block-".concat(s),delay:"@stagger(0, ".concat(Math.trunc(n-e),", 0, easeOutQuad, omni, true)")});o.addIncident(r,0),i.addIncident(o,(this.instance.data.length-1-s)*a)}else if("lines"===this.instance.grid){const s=new t.Group({selector:"#stele-".concat(0)}),o=new t.Combo({incidents:[{incidentClass:t.CSSEffect,attrs:{animatedAttrs:{width:"0%"},initialValues:{width:"100%"}},props:{duration:Math.trunc(n),easing:"easeInOutQuad"},position:0}]},{selector:".stele-block-".concat(0),delay:"@stagger(0, ".concat(Math.trunc(n-e),", 0, linear, omni, true)")});s.addIncident(o,0),i.addIncident(s,(this.instance.data.length-1)*a)}return i}buildIntroGraph(i){const n=this.instance.introDur/this.instance.data.length,a=.35*n,e=.8*n,s=new t.Group,o=new t.Group;for(let r=0;r<this.instance.dataSetsNum;r++)for(let c=0;c<this.instance.data.length;c++){if(c!==this.instance.data.length-1){const t=new x.Draw({animatedAttrs:{cover:1},initialValues:{cover:0}},{selector:"#line-".concat(r,"-").concat(c),duration:Math.trunc(e),easing:"easeInOutQuad"});s.addIncident(t,Math.trunc(n*c+.2*n))}const l=new t.CSSEffect({animatedAttrs:{opacity:1,r:"".concat(this.instance.r,"%")},initialValues:{opacity:0,r:"0"}},{selector:"#point-".concat(r,"-").concat(c),duration:Math.trunc(a),easing:"easeInQuart"});o.addIncident(l,Math.trunc(n*c));const h=this.instance.findPointY(c,r)-.083*this.instance.linesHeight,d=h+.07*this.instance.linesHeight/2;let u=this.instance.data.length>2?10:5*this.instance.data.length;u=u<6?6:u;const p=this.instance.findPointX(c)-u*this.instance.linesWidth/100*.5,g=p+this.instance.linesWidth*(u/100)/2,m=new t.CSSEffect({animatedAttrs:{opacity:.6,width:"".concat(u,"%"),"min-width":"".concat(u,"%"),height:"7%",top:"".concat(h,"px"),left:"".concat(p,"px"),"font-size":this.instance.fontSizeInner},initialValues:{opacity:0,width:"0%","min-width":"0%",height:"0%",top:"".concat(d,"px"),left:"".concat(g,"px"),"font-size":0}},{selector:".label-".concat(r,"-").concat(this.instance.data[c].name),duration:Math.trunc(a),easeing:"easeInOutCubic"});if(i.addIncident(m,Math.trunc(n*c+.2*a)),this.instance.trace){const[t,e,s,o,r,l,h,d]=[...this.buildSvgIntroParams(c,a,n)],u=new v.ZoomTo({animatedAttrs:{position:{x:l,y:h,zoom:d}},initialValues:{position:{x:s,y:o,zoom:r}}},{selector:".viewport-lineGraph",duration:Math.trunc(e),easing:"easeInOutQuad"});i.addIncident(u,Math.trunc(t))}}return[i,s,o]}buildSvgIntroParams(t,i,n){let a,e,s,o=0,r=0,c=this.instance.findPointX(t)+(1-this.instance.graphScale.width)/2*g.lineGraph.originalDims.width,l=this.instance.findPointY(t,0)+(1-this.instance.graphScale.height)/2*g.lineGraph.originalDims.height,h=this.instance.traceScale;return 0===t?(a=.5*g.lineGraph.originalDims.width,e=.5*g.lineGraph.originalDims.height,s=this.instance.traceScale,r=i-.15*n,o=0):t===this.instance.data.length-1?(a=this.instance.findPointX(t-1)+(1-this.instance.graphScale.width)/2*g.lineGraph.originalDims.width,e=this.instance.findPointY(t-1,0)+(1-this.instance.graphScale.height)/2*g.lineGraph.originalDims.height,s=this.instance.traceScale,c=.5*g.lineGraph.originalDims.width,l=.5*g.lineGraph.originalDims.height,h=1,o=n*(t-1)+i,r=n+i-.15*n):(a=this.instance.findPointX(t-1)+(1-this.instance.graphScale.width)/2*g.lineGraph.originalDims.width,e=this.instance.findPointY(t-1,0)+(1-this.instance.graphScale.height)/2*g.lineGraph.originalDims.height,s=this.instance.traceScale,r=n,o=n*(t-1)+i),[o,r,a,e,s,c,l,h]}buildOutroGraph(i){const n=this.instance.outroDur/(this.instance.data.length+1),a=.25*n,e=.8*n,s=this.instance.trace?1:0,o=new t.Group,r=new t.Group;for(let c=0;c<this.instance.dataSetsNum;c++){const l=new t.Group;for(let i=0;i<this.instance.data.length;i++){if(i!==this.instance.data.length-1){const t=new x.Draw({animatedAttrs:{cover:0},initialValues:{cover:1}},{selector:"#line-".concat(c,"-").concat(i),duration:Math.trunc(e),easing:"easeInOutQuad"});o.addIncident(t,Math.trunc(n*(this.instance.data.length+s-i-2)+.2*n))}const h=new t.CSSEffect({animatedAttrs:{opacity:0,r:"0"},initialValues:{opacity:1,r:"".concat(this.instance.r,"%")}},{selector:"#point-".concat(c,"-").concat(i),duration:Math.trunc(a),easeing:"easeOutCubic"});r.addIncident(h,Math.trunc(n*(this.instance.data.length+s-i-1)));const d=this.instance.findPointY(i,c)-.083*this.instance.linesHeight,u=d+.07*this.instance.linesHeight/2;let p=5*this.instance.data.length>10?10:5*this.instance.data.length;p=p<6?6:p;const g=this.instance.findPointX(i)-p*this.instance.linesWidth/100*.5,m=g+this.instance.linesWidth*(p/100)/2,f=new t.CSSEffect({animatedAttrs:{opacity:0,width:"0%","min-width":"0%",height:"0%",top:"".concat(u,"px"),left:"".concat(m,"px"),"font-size":0},initialValues:{opacity:.6,width:"".concat(p,"%"),"min-width":"".concat(p,"%"),height:"7%",top:"".concat(d,"px"),left:"".concat(g,"px"),"font-size":this.instance.fontSizeInner}},{selector:".label-".concat(c,"-").concat(this.instance.data[i].name),duration:Math.trunc(a),easeing:"easeInOutCubic"});l.addIncident(f,Math.trunc(n*(this.instance.data.length+s-i-1)+.2*a))}i.addIncident(l,0)}return[i,o,r]}}class S extends t.HTMLClip{get html(){this.buildVars();const t=[];for(let i=0;i<this.words.length;i++)t.push('<div id="word-'.concat(i,'" class="fontColorOn letter-wrapper-title">').concat(this.words[i],"</div>")),i!==this.words.length-1&&t.push('<div class="space-char letter-wrapper-title">-</div>');const i=[];if(this.legend){const t=[];for(let i=0;i<this.dataSetsNum;i++)t.push('<div class="line-wrapper"><div class="color-wrapper">\n              <div class="line-color color-'.concat(i,'"></div>\n            </div><div class="line-title">').concat(this.dataSets[i].title,"</div></div>"));i.push('<div class="legend-wrapper">'.concat(t.join(""),"</div>"))}const n=[];if("steles"===this.grid)for(const t in this.data){const i=[];for(let n=0;n<this.steleBlockNum;n++)i.push('<div\n              class="stele-block-'.concat(t,' stele-block stele-grid-block"}\n            ></div>'));n.push('<div id="stele-'.concat(t,'" class="data-stele stele-grid">').concat(i.join(""),"</div>"))}else if("lines"===this.grid){const t=[];for(let i=0;i<this.steleBlockNum;i++)t.push('<div class="stele-block-0 stele-block line-grid-block"></div>');n.push('<div id="stele-0" class="data-stele line-grid">'.concat(t.join(""),"</div>"))}const a=[];for(let t=0;t<this.dataSetsNum;t++){const i=[];for(let n=0;n<this.data.length;n++){const a=[],e=this.findPointX(n),s=this.findPointY(n,t);if(n!==this.data.length-1){const i=this.findPointX(n+1),o=this.findPointY(n+1,t);a.push('<path\n              id="line-'.concat(t,"-").concat(n,'"\n              class="line-').concat(t,'"\n              d="M ').concat(e," ").concat(s,"L ").concat(i," ").concat(o,'"\n              stroke="').concat(this.dataSets[t].color,'"\n              stroke-width="0.65%"\n              stroke-linecap="round"\n              fill="none"\n            />'))}a.push('<circle\n            id="point-'.concat(t,"-").concat(n,'"\n            class="point-').concat(t,' datapoint"\n            cx="').concat(e,'"\n            cy="').concat(s,'"\n            r="').concat(this.r,'%"\n            fill="').concat(this.senaryC,'"\n            stroke="').concat(this.senaryC,'"\n          />')),i.push("<g>".concat(a.join(""),"</g>"))}a.push("<g>".concat(i.join(""),"</g>"))}const e=[];e.push('<svg\n        class="lines-container"\n        viewbox="0 0 '.concat(this.linesWidth," ").concat(this.linesHeight,'"\n      >').concat(a.join(""),"</svg>"));const s=[];for(let t=0;t<this.dataSetsNum;t++){const i=[];for(let n=0;n<this.data.length;n++){const{name:a,values:e}=this.data[n];i.push('<div>\n            <div\n              class="hoverPoint-'.concat(t,"-").concat(a,' hoverPoint"\n            ></div>\n            <div\n              class="label-').concat(t,"-").concat(a,' inner-label-container"\n              id="label-').concat(t,"-").concat(a,'"\n            >\n              <div class="inner-label">\n                ').concat(parseFloat(e[t].toFixed(2))," ").concat(this.unit,"\n              </div>\n            </div>\n          </div>"))}s.push('<div class="line-'.concat(t,'-label-container">').concat(i.join(""),"</div>"))}const o=[];for(const t in this.data){const i=[];this.data[t].name.length>4&&(this.data[t].name=this.data[t].name.slice(0,4));for(const n in this.data[t].name)i.push('<div id="letter-'.concat(t,"-").concat(n,'" class="letter-container">\n            <div class="letter-wrapper-label fontColorOn">\n              ').concat(this.data[t].name[n],"\n            </div>\n          </div>"));o.push('<div class="label-container" id="label-'.concat(t,'">\n          ').concat(i.join(""),"\n        </div>"))}return'<div class="container-lineGraph">\n        <div class="viewport-lineGraph">\n          <div class="title-container-lineGraph">\n            <div class="title-wrapper-lineGraph">'.concat(t.join(""),"</div>\n          </div>\n          ").concat(i.join(""),'\n          <div class="graph-background"></div>\n          <div class="dataStele-container">').concat(n.join(""),'</div>\n          <div class="svg-container">').concat(e.join(""),'</div>\n          <div class="graph-labels-container">').concat(s.join(""),'</div>\n          <div class="x-labels-container-lineGraph">').concat(o.join(""),'</div>\n          <div class="x-labels-back-wrapper-lineGraph">\n            <div class="block-background"></div>\n          </div>\n        </div>\n      </div>')}get css(){return function(t){const i={".container-lineGraph":{width:"100%",height:"100%",background:t.backgroundC,"font-family":t.fontFamily,"font-size":t.fontSizeTitle,display:"flex"},".viewport-lineGraph":{position:"absolute",top:"".concat(t.legend?"2%":"0%"),"transform-origin":"top left",width:"100%",height:"100%"},".title-container-lineGraph":{background:"transparent",width:"60%",height:"10%",top:"8%",left:"8%",position:"absolute",display:"flex","align-items":"center","z-index":"1","justify-content":"space-around"},".title-wrapper-lineGraph":{display:"flex","flex-grow":"2","flex-wrap":"nowrap",overflow:"hidden","padding-left":"6px"},".letter-wrapper-title":{display:"flex","flex-direction":"column",position:"relative","font-size":"190%"},".legend-wrapper":{position:"absolute",width:"".concat(1===t.dataSetsNum?14:26,"%"),height:"".concat(t.legendHeight,"%"),top:"".concat(11-3*(t.legendHeightFactor+(t.legendHeightFactor%1?1:0)-1),"%"),left:"".concat(68+(1===t.dataSetsNum?12:0),"%"),background:t.quinaryC,"font-size":t.fontSizeInner,display:"flex","flex-wrap":t.attrs.legendWrrap?"wrap":"nowrap","align-items":"center","z-index":"1",padding:"0 10px"},".line-wrapper":{height:"".concat(1/(t.legendHeightFactor+(t.legendHeightFactor%1?1:0))*100,"%"),display:"flex",overflow:"hidden","flex-grow":1},".color-wrapper":{display:"flex","align-items":"center","justify-content":"center",width:"100%",height:"100%"},".line-color":{width:"60%",height:"60%"},".line-title":{display:"flex","align-items":"flex-start","justify-content":"flex-start","font-size":t.fontSizeInner,width:"75%",height:"100%"},".graph-background":{left:"10%",top:"13%",width:"80%",height:"70%",position:"absolute",background:t.secondaryC},".svg-container":{width:"76%",height:"58%",top:"21%",left:"12%",position:"relative","z-index":"1",overflow:"visible"},".lines-container":{width:"100%",height:"100%","min-height":"100%","min-width":"100%",overflow:"visible"},".dataStele-container":{width:"76%",height:"58%",top:"21%",left:"12%",position:"absolute",display:"flex","align-items":"center","justify-content":"space-around","z-index":"0"},".data-stele":{height:"100%",display:"flex","flex-direction":"column-reverse","justify-content":"space-between"},".line-grid":{width:"100%",height:"100%"},".stele-grid":{width:"1%",height:"100%"},".line-grid-block":{width:"100%",height:"".concat(Math.trunc(t.linesHeight*(.13*t.gridH/t.steleBlockNum)),"px")},".stele-grid-block":{width:"100%",height:"".concat(Math.trunc(t.linesHeight*(.26*t.gridH/t.steleBlockNum)),"px")},".stele-block":{"max-height":"".concat(5*t.gridH,"px"),opacity:"0.8",background:t.primaryC},".graph-labels-container":{width:"76%",height:"58%",top:"21%",left:"12%",position:"absolute"},".x-labels-back-wrapper-lineGraph":{width:"76%",height:"6%",top:"80%",left:"12%",position:"absolute",display:"flex","justify-content":"flex-end"},".block-background":{width:"100%",height:"100%",background:t.accentC,position:"relative"},".x-labels-container-lineGraph":{background:"transparent",width:"76%",height:"6%",top:"80%",left:"12%",position:"absolute",display:"flex","align-items":"center","z-index":"1","justify-content":"space-around"},".label-container":{display:"flex","flex-direction":"row",overflow:"hidden"},".letter-container":{overflow:"hidden",position:"relative"},".letter-wrapper-label":{"font-size":"100%",display:"flex","flex-direction":"column",position:"relative"},".fontColorOn":{color:t.fontC},".space-char":{visibility:"hidden"},".inner-label":{opacity:"1",display:"flex","justify-content":"center","align-items":"center",width:"100%",height:"100%"},".inner-label-container":{"font-size":t.fontSizeInner,opacity:"0.6",width:"".concat(5*t.data.length,"%"),"min-width":"6%","max-width":"10%",height:"7%",position:"absolute",display:"".concat(t.hover?"none":"block"),"z-index":"2"},".hoverPoint":{position:"absolute",width:"".concat(.01*g.lineGraph.originalDims.width,"px"),height:"".concat(.01*g.lineGraph.originalDims.width,"px"),"border-radius":"50%","z-index":"9999"}};for(let n=0;n<t.dataSetsNum;n++){let a;a=t.dataSetsNum>1?t.dataSets[n].color:t.quaternaryC,i[".color-".concat(n)]={background:a},i[".line-".concat(n,"-label-container")]={width:"100%",height:"100%",position:"absolute"};for(let e=0;e<t.data.length;e++){const s=t.findPointY(e,n)-.083*t.linesHeight;let o=5*t.data.length>10?10:5*t.data.length;o=o<6?6:o;const r=t.findPointX(e)-o*t.linesWidth/100*.5;i[".label-".concat(n,"-").concat(t.data[e].name)]={background:a,top:"".concat(s,"px"),left:"".concat(r,"px")};const c=o*t.linesWidth/100*.5-.01*g.lineGraph.originalDims.width/2,l=.07*t.linesHeight;i[".hoverPoint-".concat(n,"-").concat(t.data[e].name)]={top:"".concat(s+l,"px"),left:"".concat(r+c,"px")}}}for(let n=0;n<t.dataSetsNum;n++)for(let a=0;a<t.data.length;a++)i[".hoverPoint-".concat(n,"-").concat(t.data[a].name,":hover + .label-").concat(n,"-").concat(t.data[a].name)]={display:"block"};return c(i)}(this)}get fonts(){return[{type:"google-font",src:"".concat(this.url)}]}buildTree(){if(e(this,".container-lineGraph"),this.attrs.timings.intro){let i=new t.Group;i.addIncident(this.animConstructor.buildBackgroundIntro(),0*this.introDur),i.addIncident(this.animConstructor.buildTitleIntroCombo(),Math.trunc(.14*this.introDur)),i.addIncident(this.animConstructor.buildIntroLegend(),Math.trunc(.1*this.introDur)),i.addIncident(this.animConstructor.buildIntroLabels(),Math.trunc(.18*this.introDur)),i.addIncident(this.animConstructor.buildIntroStele(),Math.trunc(.45*this.introDur));const n=.35*(this.introDur/this.data.length),[a,e,s]=this.animConstructor.buildIntroGraph(i);i=a,i.addIncident(e,Math.trunc(n)),i.addIncident(s,0),this.addIncident(i,0)}if(this.attrs.timings.outro){let i=new t.Group;i.addIncident(this.animConstructor.buildBackgroundOutro(),Math.trunc(.8*this.outroDur)),i.addIncident(this.animConstructor.buildTitleOutroCombo(),Math.trunc(.76*this.outroDur)),i.addIncident(this.animConstructor.buildOutroLegend(),Math.trunc(.1*this.outroDur)),i.addIncident(this.animConstructor.buildOutroLabels(),this.outroDur-.55*this.outroDur),i.addIncident(this.animConstructor.buildOutroStele(),.25*this.outroDur);const n=.25*(this.outroDur/(this.data.length+1)),[a,e,s]=[...this.animConstructor.buildOutroGraph(i)];i=a,i.addIncident(e,Math.trunc(n)),i.addIncident(s,0),this.addIncident(i,0+this.introDur+this.staticDur)}this.addIncident(this.animConstructor.buildStaticControl(),this.introDur)}buildVars(){var t;this.animConstructor=new C(this),this.data=this.attrs.data.data,this.colorPalette=a,this.attrs.palette=this.attrs.palette||{},this.primaryC=this.attrs.palette.primary||this.colorPalette.gray,this.secondaryC=this.attrs.palette.secondary||this.colorPalette.lightGray,this.tertiaryC=this.attrs.palette.tertiary||this.colorPalette.darkGray,this.quaternaryC=this.attrs.palette.quaternary||this.colorPalette.whiteBack,this.quinaryC=this.attrs.palette.quinary||this.colorPalette.gray,this.senaryC=this.attrs.palette.senary||this.colorPalette.accent,this.fontC=this.attrs.palette.font||this.colorPalette.font,this.accentC=this.attrs.palette.accent||this.colorPalette.accent,this.backgroundC=this.attrs.palette.background||this.colorPalette.background,this.title=this.attrs.data.title,this.words=this.title.split(" "),this.dataSets=this.attrs.data.dataSets?this.attrs.data.dataSets:[{title:"",color:this.accentC}],this.dataSetsNum=this.dataSets.length;let i=2;this.dataSets.map(((t,n)=>{""!==t.color&&t.color||(t.color=this.colorPalette.dataColors[i],i++),""!==t.title&&t.title?t.title.length>10&&(t.title=t.title.substr(0,10)):t.title="Dataset-".concat(n+1)})),this.legend=this.dataSetsNum>1||(this.attrs.legend||!1),this.maxPoint=0;for(const t of this.data)Math.max(...t.values)>this.maxPoint&&(this.maxPoint=Math.max(...t.values));this.maxPoint=this.attrs.data.maxValue?this.attrs.data.maxValue:this.maxPoint,this.hover=this.attrs.data.hover||!1,this.hover=1!==this.dataSetsNum||this.hover,this.grid=this.attrs.grid||"lines",this.grid="lines"!==this.grid&&"steles"!==this.grid?"lines":this.grid,this.gridH=this.attrs.gridH||1,this.attrs.trace=this.attrs.trace||{},this.trace=1===this.dataSetsNum&&this.attrs.trace.toggle||!1,this.traceScale=this.attrs.trace.scale||1.4,this.unit=this.attrs.data.unit||"%",this.interval=this.attrs.data.interval||5,this.steleBlockNum=this.maxPoint/this.interval+1,this.config=g,this.graphScale={width:.76,height:.58},this.legendHeightFactor=1===this.dataSetsNum?1:this.dataSetsNum/2,this.legendHeight=this.attrs.legendHeight?this.attrs.legendHeight:4*(this.legendHeightFactor+(this.legendHeightFactor%1?1:0)),this.linesWidth=r(this.props.containerParams.width).number*this.graphScale.width,this.linesHeight=r(this.props.containerParams.height).number*this.graphScale.height,this.steleWidth=.01*this.linesWidth,this.spaceAround=(this.linesWidth-this.steleWidth*this.data.length)/(2*this.data.length),this.r=this.attrs.dataPointR||.65,this.findPointX=t=>this.steleWidth/2+this.spaceAround+t*(2*this.spaceAround+this.steleWidth),this.findPointY=(t,i)=>this.linesHeight-this.data[t].values[i]*this.linesHeight/this.maxPoint,this.attrs.font=this.attrs.font||{},this.fontFamily=this.attrs.font.fontFamily||"'Staatliches', cursive",this.fontSizeLabel=this.attrs.font.size||"1.7rem",this.fontSizeTitle=1.5*r(this.fontSizeLabel).number+r(this.fontSizeLabel).unit,this.fontSizeInner=1*r(this.fontSizeLabel).number+r(this.fontSizeLabel).unit,this.url=this.attrs.font.url||"https://fonts.googleapis.com/css2?family=Staatliches&display=swap",this.attrs.timings=this.attrs.timings||{},this.introDur=this.attrs.timings.intro||0,this.outroDur=this.attrs.timings.outro||0,this.staticDur=null!==(t=this.attrs.timings.static)&&void 0!==t?t:1e3}}function I(t){return t>a.dataColors.length-1?a.dataColors[Math.floor(Math.random()*Math.floor(a.dataColors.length))]:a.dataColors[t]}class M extends t.HTMLClip{get html(){return this.data=this.attrs.data.data,'<div class="container-pieChart">\n        <h1 class="title">'.concat(this.buildTitle().join(""),'</h1>\n        <div class="columns">\n          <div class="col-1">\n            <div class="piechart"></div>\n          </div>\n          <div class="col-2">\n            <div class="legend">').concat(this.buildLegend().join(""),"</div>\n          </div>\n        </div>\n      </div>")}get css(){var t,i,n;const e={data:this.attrs.data,palette:this.attrs.palette||{},font:this.attrs.font||{},radiusString:this.createRadiusString()},s={".container-pieChart":{opacity:1,"background-color":"transparent",width:"100%",height:"100%",display:"flex","align-items":"center","flex-direction":"column","font-family":"".concat((null===(t=e.font)||void 0===t?void 0:t.fontFamily)||"Staatliches, cursive"),"font-size":"".concat((null===(i=e.font)||void 0===i?void 0:i.size)||"1.6rem"),color:e.palette.font||a.font},".title":{top:"-1rem",position:"relative",display:"flex","justify-content":"center","align-items":"center","flex:direction":"row",overflow:"hidden"},".columns":{width:"100%",height:"100%",display:"flex"},".col-1":{width:"65%",height:"100%",display:"flex","justify-content":"center","align-items":"center"},".col-2":{width:"35%",height:"100%",display:"flex","justify-content":"center","align-items":"center"},".piechart":{display:"block",width:"95%",height:"95%","border-radius":"50%","background-image":"conic-gradient(".concat(e.radiusString,")"),"margin-left":"2rem"},".legend":{display:"flex","flex-direction":"column",padding:"1rem","max-width":"75%","min-width":"50%",background:e.palette.primary||"rgba(0,0,0, 0.2)",position:"relative",top:"22.5%",overflow:"hidden"},".legend-row":{display:"flex","flex-direction":"row","align-items":"center","align-self":"flex-start"},".legend-text":{" white-space":"nowrap"},".space":{"min-width":null!==(n=e.font)&&void 0!==n&&n.size?"calc(".concat(e.font.size," * 0.5)"):"0.8rem"},".char":{position:"relative"}};return e.data.data.forEach(((t,i)=>{s[".meter-"+i]={background:t.color||I(i),width:"1rem",height:"1rem",display:"block","margin-right":"0.5rem","margin-bottom":"0.25rem"}})),c(s)}get fonts(){var t;return[{type:"google-font",src:(null===(t=this.attrs.font)||void 0===t?void 0:t.url)||"https://fonts.googleapis.com/css2?family=Staatliches&display=swap"}]}buildTree(){var i,n;if(s(this,".container-pieChart"),this.static=null!==(i=this.attrs.timings.static)&&void 0!==i?i:1e3,this.intro=this.attrs.timings.intro||0,this.outro=this.attrs.timings.outro||0,this.intro){const i=Math.round(.8*this.intro),n=Math.round(.4*this.intro);this.attrs.data.title&&[...this.attrs.data.title].forEach(((i,a)=>{const e=new t.CSSEffect({animatedAttrs:{right:"0%",opacity:1},initialValues:{right:"-102%",opacity:0,position:"relative"}},{duration:Math.round(n/this.attrs.data.title.length),selector:".char-".concat(a),easing:"easeOutCubic"});this.addIncident(e,Math.round(n/this.attrs.data.title.length)*a)}));const a=new t.CSSEffect({animatedAttrs:{"background-image":"conic-gradient(".concat(this.createRadiusString(),")")},initialValues:{"background-image":"conic-gradient(".concat(this.createNullRadiusString(),")")}},{duration:i,selector:".piechart",easing:"easeInOutCubic"});this.addIncident(a,n-.2*this.intro);const e=new t.CSSEffect({animatedAttrs:{width:"75%","min-width":"50%",opacity:1},initialValues:{width:"0%","min-width":"0%",opacity:0}},{duration:i,selector:".legend",easing:"easeInOutCubic"});this.addIncident(e,n-.2*this.intro)}const a=new t.CSSEffect({animatedAttrs:{}},{duration:this.static,selector:".container-pieChart"});if(this.addIncident(a,this.intro),null!==(n=this.attrs.timings)&&void 0!==n&&n.outro){var e;const i=Math.round(null===(e=this.attrs.timings)||void 0===e?void 0:e.outro),n=new t.CSSEffect({animatedAttrs:{top:"-10%"},initialValues:{top:"0%"}},{duration:.5*i,selector:".title",easing:"easeInQuart"});this.addIncident(n,this.intro+this.static+.2*this.outro);const a=new t.CSSEffect({animatedAttrs:{width:"0%","min-width":"0%",opacity:0}},{duration:i,selector:".legend",easing:"easeInOutCirc"});this.addIncident(a,this.intro+this.static);const s=new t.CSSEffect({animatedAttrs:{"background-image":"conic-gradient(".concat(this.createNullRadiusString(),")")},initialValues:{"background-image":"conic-gradient(".concat(this.createRadiusString(),")")}},{duration:i,selector:".piechart",easing:"easeInOutCubic"});this.addIncident(s,this.intro+this.static)}}createRadiusString(){let t="",i=0;for(const n in this.data)t+="0"===n?"\n                    ".concat(this.data[n].color||I(n),"\n                    ").concat(this.data[n].value/100,"turn,\n                "):"\n                    ".concat(this.data[n-1].color||I(n),"\n                    ").concat(this.data[n-1].value/100,"turn,\n                    ").concat(this.data[n].color||I(n),"\n                    ").concat(i+this.data[n].value/100,"turn,\n                "),i+=this.data[n].value/100;return t+"rgba(0,0,0,0) 0 360deg"}createNullRadiusString(){let t="";for(const i in this.data)t+="0"===i?"\n                    ".concat(this.data[i].color||I(i),"\n                    ",0,"turn,\n                "):"\n                    ".concat(this.data[i-1].color||I(i),"\n                    ",0,"turn,\n                    ").concat(this.data[i].color||I(i),"\n                    ",0,"turn,\n                ");return t+"rgba(0,0,0,0) 0 360deg"}buildTitle(){return(this.data.title||[]).map(((t,i)=>'<div class="char">\n          <div class="char-'.concat(i," ").concat(" "===t?" space":"",'">\n            ').concat(t,"\n          </div>\n        </div>")))}buildLegend(){return this.data.map(((t,i)=>(t.name.length>24&&(t.name=t.name.substring(0,21)+"..."),'<div class="legend-row">\n          <div class="meter-'.concat(i,'"></div>\n          <div class="legend-text">').concat(t.name,"</div>\n        </div>"))))}}var D={ProgressBar:{data:{type:"array",items:{type:"any"}},timings:{type:"object",props:{intro:{type:"number",min:0,optional:!0},static:{type:"number",min:0,optional:!0},outro:{type:"number",min:0,optional:!0}}},pallete:{type:"object",optional:!0,props:{primary:{type:"color",optional:!0},secondary:{type:"color",optional:!0},font:{type:"color",optional:!0},accent:{type:"color",optional:!0},background:{type:"color",optional:!0}}},font:{type:"object",optional:!0,props:{url:{type:"string",optional:!0},fontFamily:{type:"string",optional:!0},size:{type:"measurement",optional:!0,min:0,units:["px","%","em","rem"]}}},options:{type:"object",optional:!0,props:{hidePercentage:{type:"boolean",optional:!0}}}},BarChartSimple:{data:{type:"object",props:{title:{type:"string",optional:!0},subtitle:{type:"string",optional:!0},showGrid:{type:"boolean",optional:!0},maxValue:{type:"number",min:0,optional:!0},data:{type:"array",items:{type:"any"}}}},timings:{type:"object",props:{intro:{type:"number",min:0,optional:!0},static:{type:"number",min:0,optional:!0},outro:{type:"number",min:0,optional:!0}}},pallete:{type:"object",optional:!0,props:{primary:{type:"color",optional:!0},secondary:{type:"color",optional:!0},tertiary:{type:"color",optional:!0},font:{type:"color",optional:!0},accent:{type:"color",optional:!0},background:{type:"color",optional:!0}}},font:{type:"object",optional:!0,props:{url:{type:"string",optional:!0},fontFamily:{type:"string",optional:!0},size:{type:"measurement",optional:!0,min:0,units:["px","%","em","rem"]}}}},LineGraph:{data:{type:"object",props:{title:{type:"string",optional:!0},showGrid:{type:"boolean",optional:!0},interval:{type:"number",min:0,optional:!0},maxValue:{type:"number",min:0,optional:!0},unit:{type:"string",optional:!0},hover:{type:"boolean",optional:!0},data:{type:"array",items:{type:"any"}},dataSets:{type:"array",items:{type:"any"}}}},timings:{type:"object",props:{intro:{type:"number",min:0,optional:!0},static:{type:"number",min:0,optional:!0},outro:{type:"number",min:0,optional:!0}}},pallete:{type:"object",optional:!0,props:{primary:{type:"color",optional:!0},secondary:{type:"color",optional:!0},tertiary:{type:"color",optional:!0},quaternary:{type:"color",optional:!0},font:{type:"color",optional:!0},accent:{type:"color",optional:!0},background:{type:"color",optional:!0}}},font:{type:"object",optional:!0,props:{url:{type:"string",optional:!0},fontFamily:{type:"string",optional:!0},size:{type:"measurement",optional:!0,min:0,units:["px","%","em","rem"]}}},hover:{type:"boolean",optional:!0},legend:{type:"boolean",optional:!0},trace:{type:"object",optional:!0,props:{toggle:{type:"boolean",optional:!0},scale:{type:"number",optional:!0}}}},PieChart:{data:{type:"object",props:{title:{type:"string",optional:!0},data:{type:"array",items:{type:"any"}}}},timings:{type:"object",props:{intro:{type:"number",min:0,optional:!0},static:{type:"number",min:0,optional:!0},outro:{type:"number",min:0,optional:!0}}},pallete:{type:"object",optional:!0,props:{font:{type:"color",optional:!0},background:{type:"color",optional:!0}}},font:{type:"object",optional:!0,props:{url:{type:"string",optional:!0},fontFamily:{type:"string",optional:!0},size:{type:"measurement",optional:!0,min:0,units:["px","%","em","rem"]}}}}};return{npm_name:"@donkeyclip/motorcortex-graphs",version:"2.2.0",incidents:[{exportable:p,name:"ProgressBar",attributesValidationRules:D.ProgressBar,originalDims:{width:"1200px",height:"900px"}},{exportable:l,name:"BarChartSimple",attributesValidationRules:D.BarChartSimple},{exportable:S,name:"LineGraph",attributesValidationRules:D.LineGraph},{exportable:M,name:"PieChart",attributesValidationRules:D.PieChart,originalDims:{width:"1200px",height:"900px"}}]}}));
